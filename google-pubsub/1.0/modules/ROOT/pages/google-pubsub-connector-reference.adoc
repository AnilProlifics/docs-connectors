

= Google Pub Sub Module Connector Reference



== Configurations
---
[[Config]]
=== Configuration


==== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| <<Config_Connection, PubSub Connection>>
 | The connection types to provide to this configuration. | | x
| Default Project Id a| String |  A globally unique identifier for your project. A default project ID to use by the operations, overridable at operation config level. |  |
| Default Subscription Name a| String |  A default subscription to use by the operations, overridable at operation config level. |  |
| Default Topic Name a| String |  A default topic to use by the operations, overridable at operation config level. |  |
| Name a| String |  The identifier of this element used to reference it in other components |  | x
| Expiration Policy a| <<ExpirationPolicy>> |  Configures the minimum amount of time that a dynamic configuration instance can remain idle before Mule considers it eligible for expiration. This does not mean that the platform expires the instance at the exact moment that it becomes eligible. Mule purges the instances as appropriate. |  |
|===

==== Connection Types
[[Config_Connection]]
===== PubSub Connection


====== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Private key ID a| String |  Identifier of the private key for service account. It is part of service-credentials created in PubSub. |  | x
| Client ID a| String |  Identifier of the client for service account. It is part of service-credentials created in PubSub. |  | x
| Client email a| String |  Client email for service account. It is part of service-credentials created in PubSub. |  | x
| Private key a| String |  Private key for service account. It is part of service-credentials created in PubSub. |  | x
| Reconnection a| <<Reconnection>> |  When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  |
|===

== Supported Operations
* <<CreateSnapshot>>
* <<DeleteSnapshot>>
* <<GetSnapshot>>
* <<GetSnapshotList>>
* <<PatchSnapshot>>
* <<PublishMessage>>
* <<SeekMessages>>

==== Associated Sources
* <<MessageListener>>


== Operations

[[CreateSnapshot]]
== Create Snapshot
`<pubsub:create-snapshot>`


Creates a snapshot from the requested subscription. Snapshots are used in seek operations, which allow you to manage message acknowledgments in bulk. That is, you can set the acknowledgment state of messages in an existing subscription to the state captured by a snapshot.


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Snapshot Name a| String |  A project-wide unique identifier for snapshot |  | x
| Labels a| Object |  Labels are key-value pairs that help users to organize Google Cloud resources. Attaching labels to resources helps to filter them based on the labels. |  |
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Project ID a| String |  A globally unique identifier for your project. |  |
| Subscription Name a| String |  A project-wide unique identifier for subscription. |  |
| Target Variable a| String |  Name of the variable that storesoperation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable |  #[payload] |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |<<Snapshot>>
|===

=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:ALREADY_EXISTS
* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:CONNECTIVITY
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:RETRY_EXHAUSTED
* PUBSUB:UNAVAILABLE


[[DeleteSnapshot]]
== Delete Snapshot
`<pubsub:delete-snapshot>`


Deletes an existing snapshot


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Project ID a| String |  A globally unique identifier for your project. |  |
| Snapshot Name a| String |  A project-wide unique identifier for snapshot. |  | x
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===


=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:CONNECTIVITY
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:RETRY_EXHAUSTED
* PUBSUB:UNAVAILABLE


[[GetSnapshot]]
== Get Snapshot
`<pubsub:get-snapshot>`


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Project ID a| String |  A globally unique identifier for your project. |  |
| Snapshot Name a| String |  A project-wide unique identifier for snapshot. |  | x
| Target Variable a| String |  Name of the variable that storesoperation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable |  #[payload] |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |<<Snapshot>>
|===

=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:CONNECTIVITY
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:RETRY_EXHAUSTED
* PUBSUB:UNAVAILABLE


[[GetSnapshotList]]
== Get Snapshot List
`<pubsub:get-snapshot-list>`


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Project Id a| String |  A globally unique identifier for your project |  |
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Streaming Strategy a| * <<RepeatableInMemoryIterable>>
* <<RepeatableFileStoreIterable>>
* non-repeatable-iterable |  Configure if repeatable streams should be used and their behavior |  |
| Target Variable a| String |  Name of the variable that storesoperation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable |  #[payload] |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |Array of <<Snapshot>>
|===

=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:UNAVAILABLE


[[PatchSnapshot]]
== Patch Snapshot
`<pubsub:patch-snapshot>`


Updates an existing snapshot.


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Snapshot a| Any |  Snapshot object with updated fields. |  #[payload] |
| Update Mask a| String |  Indicates which fields in the provided snapshot to update. Must be specified and non-empty. This is a comma-separated list of fully qualified names of fields. |  | x
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Target Variable a| String |  Name of the variable that storesoperation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable |  #[payload] |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |<<Snapshot>>
|===

=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:CONNECTIVITY
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:RETRY_EXHAUSTED
* PUBSUB:UNAVAILABLE


[[PublishMessage]]
== Publish Message
`<pubsub:publish-message>`


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Ordering Key a| String |  If non-empty, identifies related messages for which publish order should be respected. This key is respected when the subscriber has enabled message ordering. |  |
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Project ID a| String |  A globally unique identifier for your project. |  |
| Topic Name a| String |  A project-wide unique identifier for topic. |  |
| Message a| Binary |  Message content that will be published to the topic. If not empty must contain at least one attribute. |  |
| Attributes a| Object |  Attributes for this message. If this field is empty, the message must contain non-empty data. This can be used to filter messages on the subscription. |  |
| Target Variable a| String |  Name of the variable that storesoperation's output. |  |
| Target Value a| String |  An expression to evaluate against the operation's output and store the expression outcome in the target variable |  #[payload] |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |String
|===

=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:CONNECTIVITY
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:RETRY_EXHAUSTED
* PUBSUB:UNAVAILABLE


[[SeekMessages]]
== Seek Messages
`<pubsub:seek-messages>`


Supports bulk acknowledging or un-acknowledging of messages to given snapshot or point of time based on the seekTarget provided. Seeking to a time marks every message received by Pub/Sub before the time as acknowledged, and all messages received after the time as unacknowledged. That means that you can replay and reprocess previously acknowledged messages when seeking to a time in past or purge messages by seeking to a time in the future. NOTE: If you seek to a timestamp using a subscription with a filter, the Pub/Sub service only redelivers the messages that match the filter The snapshot feature allows you to capture the message acknowledgment state of a subscription. Once a snapshot is created, it retains: All messages that were unacknowledged in the source subscription at the time of the snapshot's creation. Any messages published to the topic thereafter. You can replay these unacknowledged messages by using a snapshot to seek to any of the topic's subscriptions. NOTE: If you seek to a snapshot using a subscription with a filter, the Pub/Sub service only redelivers the messages in the snapshot that match the filter of the subscription making the seek request.


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Project ID a| String |  A globally unique identifier for your project. |  |
| Subscription Name a| String |  A project-wide unique identifier for subscription. |  |
| Snapshot Name a| String |  The snapshot to seek to. The snapshot's topic must be the same as that of the provided subscription. |  |
| Timestamp a| DateTime |  The specific time to seek to. Messages retained in the subscription that were published before this time are marked as acknowledged, and messages retained in the subscription that were published after this time are marked as unacknowledged. Note that this operation affects only those messages retained in the subscription (configured by the combination of messageRetentionDuration and retainAckedMessages). For example, if time corresponds to a point before the message retention window (or to a point before the system's notion of the subscription creation time), only retained messages will be marked as unacknowledged, and already-expunged messages will not be restored. A timestamp in RFC3339 UTC "Zulu" format, with nanosecond resolution and up to nine fractional digits. Examples: "2014-10-02T15:01:23Z" and "2014-10-02T15:01:23.045123456Z". |  |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===


=== For Configurations

* <<Config>>

=== Throws

* PUBSUB:BAD_GATEWAY
* PUBSUB:CANCELLED
* PUBSUB:CONNECTIVITY
* PUBSUB:DEADLINE_EXCEEDED
* PUBSUB:FAILED_PRECONDITION
* PUBSUB:INVALID_ARGUMENT
* PUBSUB:NOT_FOUND
* PUBSUB:PERMISSION_DENIED
* PUBSUB:RETRY_EXHAUSTED
* PUBSUB:UNAVAILABLE


== Sources

[[MessageListener]]
== On message listener
`<pubsub:message-listener>`


Runnable message receiver, using Pub/Sub Subscriber


=== Parameters

[%header%autowidth.spread]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Consumer count a| Number |  Provides specified amount of executor service for processing messages. |  5 |
| Config Ref a| ConfigurationProvider |  The name of the configuration to use to execute this component |  | x
| Primary Node Only a| Boolean |  Whether this source should only be executed on the primary node when running in a cluster |  |
| Streaming Strategy a| * <<RepeatableInMemoryStream>>
* <<RepeatableFileStoreStream>>
* non-repeatable-stream |  Configure if repeatable streams should be used and their behavior |  |
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message |  |
| Project ID a| String |  A globally unique identifier for your project. |  |
| Subscription Name a| String |  A project-wide unique identifier for subscription. |  |
| Limit Exceeded Behavior a| Enumeration, one of:

** THROW_EXCEPTION
** BLOCK
** IGNORE |  If LimitExceededBehavior not set to IGNORE, flow control enables you to have control over the behavior of receiving messages by specifying the limits for maxOutstandingRequestSize and maxOutstandingElementCount. For MessageListener source it means that if the memory size or the amount of outstanding elements (messages where no Ack() or Nack() was performed) exceeds specified limits, receiver won't receive more messages in case of LimitExceedBehavior is set to BLOCK (default) or throws FlowControlException in case of LimitExceedBehavior is set to THROW_EXCEPTION. |  BLOCK |
| Max Outstanding Request Size a| Number |  Maximum amount of memory accumulated by request before enforcing flow control. |  100 |
| Max Outstanding Request Size Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB |  The data unit for max outstanding request size. |  MB |
| Max Outstanding Element Count a| Number |  Maximum number of outstanding elements to keep in memory before enforcing flow control. |  100 |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> |  A retry strategy in case of connectivity errors |  |
|===

=== Output

[%autowidth.spread]
|===
|Type |Any
| Attributes Type a| Object
|===

=== For Configurations

* <<Config>>



== Types
[[Reconnection]]
=== Reconnection

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment fails if the test doesn't pass after exhausting the associated reconnection strategy. |  |
| Reconnection Strategy a| * <<Reconnect>>
* <<ReconnectForever>> | The reconnection strategy to use. |  |
|===

[[Reconnect]]
=== Reconnect

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect |  |
| Blocking a| Boolean | If false, the reconnection strategy will run in a separate, non-blocking thread |  |
| Count a| Number | How many reconnection attempts to make. |  |
|===

[[ReconnectForever]]
=== Reconnect Forever

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect |  |
| Blocking a| Boolean | If false, the reconnection strategy will run in a separate, non-blocking thread |  |
|===

[[ExpirationPolicy]]
=== Expiration Policy

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration |  |
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute |  |
|===

[[RepeatableInMemoryStream]]
=== Repeatable In Memory Stream

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | The amount of memory that will be allocated to consume the stream and provide random access to it. If the stream contains more data than can be fit into this buffer, then the buffer expands according to the bufferSizeIncrement attribute, with an upper limit of maxInMemorySize. |  |
| Buffer Size Increment a| Number | This is by how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower means that the buffer should not expand, meaning that a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised when the buffer gets full. |  |
| Max Buffer Size a| Number | The maximum amount of memory to use. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised. A value lower than or equal to zero means no limit. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which all these attributes are expressed |  |
|===

[[RepeatableFileStoreStream]]
=== Repeatable File Store Stream

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| In Memory Size a| Number | Defines the maximum memory that the stream should use to keep data in memory. If more than that is consumed content on the disk is buffered. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which maxInMemorySize is expressed |  |
|===

[[RedeliveryPolicy]]
=== Redelivery Policy

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Max Redelivery Count a| Number | The maximum number of times a message can be redelivered and processed unsuccessfully before triggering process-failed-message |  |
| Message Digest Algorithm a| String | The secure hashing algorithm to use. If not set, the default is SHA-256. |  |
| Message Identifier a| <<RedeliveryPolicyMessageIdentifier>> | Defines which strategy is used to identify the messages. |  |
| Object Store a| ObjectStore | The object store where the redelivery counter for each message is stored. |  |
|===

[[RedeliveryPolicyMessageIdentifier]]
=== Redelivery Policy Message Identifier

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Use Secure Hash a| Boolean | Whether to use a secure hash algorithm to identify a redelivered message. |  |
| Id Expression a| String | Defines one or more expressions to use to determine when a message has been redelivered. This property may only be set if useSecureHash is false. |  |
|===

[[Snapshot]]
=== Snapshot

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Name a| String |  |  |
| Topic a| String |  |  |
| Expire Time a| DateTime |  |  |
| Labels a| Any |  |  |
|===

[[RepeatableInMemoryIterable]]
=== Repeatable In Memory Iterable

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | The number of instances to initially keep in memory to consume the stream and provide random access to it. If the stream contains more data than can fit into this buffer, then the buffer expands according to the bufferSizeIncrement attribute, with an upper limit of maxInMemorySize. Default value is 100 instances. |  |
| Buffer Size Increment a| Number | This is by how much the buffer size expands if it exceeds its initial size. Setting a value of zero or lower means that the buffer should not expand, meaning that a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised when the buffer gets full. Default value is 100 instances. |  |
| Max Buffer Size a| Number | The maximum amount of memory to use. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error is raised. A value lower than or equal to zero means no limit. |  |
|===

[[RepeatableFileStoreIterable]]
=== Repeatable File Store Iterable

[%header,cols="20s,25a,30a,15a,10a"]
|===
| Field | Type | Description | Default Value | Required
| In Memory Objects a| Number | The maximum amount of instances to keep in memory. If more than that is required, content on the disk is buffered. |  |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which maxInMemorySize is expressed |  |
|===
