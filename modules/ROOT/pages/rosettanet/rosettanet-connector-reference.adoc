= RosettaNet Connector Reference
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

+++
This is the main class of an extension, is the entry point from which configurations, connection providers, operations and sources are going to be declared.
+++


== Configurations
---
[[config]]
=== Config


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | *x*{nbsp}
| Global HTTP Listener a| String |  +++Reference to global HTTP Listener definition for our service endpoint used by partner for both action and signal messages.+++ |  | *x*{nbsp}
| Service Endpoint Path a| String |  +++Service endpoint path, appended to base path on HTTP Listener.+++ |  | *x*{nbsp}
| Global HTTP Request a| String |  +++Reference to global HTTP Request definition for partner service endpoint used when sending both action and signal messages.+++ |  | *x*{nbsp}
| Request Endpoint Path a| String |  +++Partner endpoint path, appended to base path on HTTP Request.+++ |  | *x*{nbsp}
| Keystore path a| String |  +++Keystore containing trusted partner certificates and our own private signing key and certificate (JKS format).+++ |  | {nbsp}
| Keystore access password a| String |  +++Keystore access password.+++ |  | {nbsp}
| Signing key password a| String |  +++Private signing key password (required if signing either action or signal messages).+++ |  | {nbsp}
| Override message signing a| Enumeration, one of:

** ALWAYS
** NEVER |  +++Force message signing on or off (when set, overrides signing configured by PIP definition).+++ |  | {nbsp}
| Global usage code a| Enumeration, one of:

** Test
** Production |  +++Choose whether operating in Test or Production mode, or if both allowed.+++ |  +++Production+++ | {nbsp}
| Object store reference a| <<ObjectStore>> |  +++Object store configuration reference. If not set the connector always uses the default persistent object store to retain sent messages waiting for acknowledgments or retrys; if set, the referenced bean must be an object store configuration to be used instead.+++ |  | {nbsp}
| Mule DUNS identifier a| String |  +++DUNS business identifier for this organization.+++ |  | *x*{nbsp}
| Mule location identifier a| String |  +++Location ID for this organization. If specified, this value is included in all messages sent and verified in all messages received; if not specified no value is sent and received values are ignored.+++ |  | {nbsp}
| Partner DUNS identifier a| String |  +++Expected DUNS business identifier for partner organization.+++ |  | *x*{nbsp}
| Partner location identifier a| String |  +++Expected location ID for partner organization. If specified, this value is included in all messages sent and verified in all messages received; if not specified no value is sent and received values are ignored.+++ |  | {nbsp}
| Role in PIP a| Enumeration, one of:

** INITIATOR
** RESPONDER |  +++Our role in PIP usage.+++ |  | *x*{nbsp}
| PIP definition path a| String |  +++PIP file path.+++ |  | *x*{nbsp}
| Expiration Policy a| <<ExpirationPolicy>> |  +++Configures the minimum amount of time that a dynamic configuration instance can remain idle before the runtime considers it eligible for expiration. This does not mean that the platform will expire the instance at the exact moment that it becomes eligible. The runtime will actually purge the instances when it sees it fit.+++ |  | {nbsp}
|======================


==== Associated Operations
* <<sendAction>> {nbsp}

==== Associated Sources
* <<actionSource>> {nbsp}
* <<completionSource>> {nbsp}


== Operations

[[sendAction]]
=== Send Action
`<rosetta:send-action>`


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Initiating action a| <<ReplyAttributes>> |  |  | {nbsp}
| Content a| Binary |  |  +++#[payload]+++ | {nbsp}
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* <<non-repeatable-stream>> |  +++Configure if repeatable streams should be used and their behaviour+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| Binary
| *Attributes Type* a| <<MessageAttributes>>
|======================

==== For Configurations.
* <<config>> {nbsp}

==== Throws
* ROSETTA:WRITE {nbsp}
* ROSETTA:CONFIGURATION {nbsp}
* ROSETTA:PARSE {nbsp}
* ROSETTA:UNKNOWN {nbsp}


== Sources

[[actionSource]]
=== Action Source
`<rosetta:action-source>`


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Primary Node Only a| Boolean |  +++Whether this source should only be executed on the primary node when runnning in Cluster+++ |  | {nbsp}
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* <<non-repeatable-stream>> |  +++Configure if repeatable streams should be used and their behaviour+++ |  | {nbsp}
| Redelivery Policy a| <<RedeliveryPolicy>> |  +++Defines a policy for processing the redelivery of the same message+++ |  | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| Binary
| *Attributes Type* a| <<MessageAttributes>>
|======================

==== For Configurations.
* <<config>> {nbsp}



[[completionSource]]
=== Completion Source
`<rosetta:completion-source>`


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Primary Node Only a| Boolean |  +++Whether this source should only be executed on the primary node when runnning in Cluster+++ |  | {nbsp}
| Redelivery Policy a| <<RedeliveryPolicy>> |  +++Defines a policy for processing the redelivery of the same message+++ |  | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| <<Completion>>
| *Attributes Type* a| <<MessageAttributes>>
|======================

==== For Configurations.
* <<config>> {nbsp}



== Types
[[ExpirationPolicy]]
=== Expiration Policy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration |  | 
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute |  | 
|======================

[[MessageAttributes]]
=== Message Attributes

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Message Id a| String | Action message identifier. |  | x
| Partner Business Id a| String |  |  | x
| Partner Location Id a| String |  |  | x
| Reply Attributes a| <<ReplyAttributes>> | Identifier values used when generating an action message in reply to some other action. This is only set by the
 Action Source. |  | x
| Mime Data a| Binary | MIME action or signal message, including signature if signing is used. This is supplied to the application to
 support non-repudiation. |  | x
| Acknowledge Data a| Binary | MIME acknowledgment signal returned to sender, including signature if signing is used. This is only set by the
 ActionSource. |  | x
|======================

[[ReplyAttributes]]
=== Reply Attributes

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Message Id a| String |  |  | x
| Action Id a| String |  |  | x
| Pip Instance Id a| String |  |  | x
|======================

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | This is the amount of memory that will be allocated in order to consume the stream and provide random access to it. If the stream contains more data than can be fit into this buffer, then it will be expanded by according to the bufferSizeIncrement attribute, with an upper limit of maxInMemorySize. |  | 
| Buffer Size Increment a| Number | This is by how much will be buffer size by expanded if it exceeds its initial size. Setting a value of zero or lower will mean that the buffer should not expand, meaning that a STREAM_MAXIMUM_SIZE_EXCEEDED error will be raised when the buffer gets full. |  | 
| Max Buffer Size a| Number | This is the maximum amount of memory that will be used. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error will be raised. A value lower or equal to zero means no limit. |  | 
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which all these attributes are expressed |  | 
|======================

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max In Memory Size a| Number | Defines the maximum memory that the stream should use to keep data in memory. If more than that is consumed then it will start to buffer the content on disk. |  | 
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which maxInMemorySize is expressed |  | 
|======================

[[RedeliveryPolicy]]
=== Redelivery Policy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max Redelivery Count a| Number | The maximum number of times a message can be redelivered and processed unsuccessfully before triggering process-failed-message |  | 
| Use Secure Hash a| Boolean | Whether to use a secure hash algorithm to identify a redelivered message |  | 
| Message Digest Algorithm a| String | The secure hashing algorithm to use. If not set, the default is SHA-256. |  | 
| Id Expression a| String | Defines one or more expressions to use to determine when a message has been redelivered. This property may only be set if useSecureHash is false. |  | 
| Object Store a| <<ObjectStore>> | The object store where the redelivery counter for each message is going to be stored. |  | 
|======================

[[Completion]]
=== Completion

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Completion Code a| Enumeration, one of:

** SUCCESS
** FAILURE
** EXCEPTION | Type of completion for action message. SUCCESS means an Acknowledgment signal was received from the partner;
 EXCEPTION means an Exception signal was received from the partner; FAILURE means no response signal was received
 from the partner after the number of transmission attempts defined in the PIP configuration. |  | x
| Exception Detail a| <<ExceptionDetail>> | Details from received Exception signal. This is only present if the completion code is EXCEPTION. |  | 
| Mime Data a| Binary | Received MIME signal message, provided to the application in support of signed Acknowledgment signals. This is
 only present for completion codes of SUCCESS or EXCEPTION. |  | 
|======================

[[ExceptionDetail]]
=== Exception Detail

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Exception Code a| String |  |  | x
| Exception Error Description a| String |  |  | x
| Exception Component Code a| String |  |  | x
| Exception Type a| String |  |  | x
|======================
