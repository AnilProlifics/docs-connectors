:toc:               left
:toc-title:         IBM CTG Module
:toclevels:         2
:last-update-label!:
:docinfo:
:source-highlighter: coderay
:icons: font


= IBM CTG Module Documentation Reference



== Configurations
---
[[config]]
=== Config


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | *x*{nbsp}
| Connection a| <<config_connection, Connection>>
 | The connection types that can be provided to this configuration. | | *x*{nbsp}
| Expiration Policy a| <<ExpirationPolicy>> |  +++Configures the minimum amount of time that a dynamic configuration instance can remain idle before the runtime considers it eligible for expiration. This does not mean that the platform will expire the instance at the exact moment that it becomes eligible. The runtime will actually purge the instances when it sees it fit.+++ |  | {nbsp}
|======================

==== Connection Types
[[config_connection]]
===== Connection


====== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Host a| String |  |  +++localhost+++ | {nbsp}
| Port a| String |  |  +++2006+++ | {nbsp}
| Servers name a| String |  |  | *x*{nbsp}
| Username a| String |  |  | *x*{nbsp}
| Password a| String |  |  | *x*{nbsp}
| Keystore location a| String |  +++The location of the keystore containing the certificates required for an SSL connection.+++ |  | {nbsp}
| Keystore Password a| String |  +++The password required to access the keystore for an SSL connection.+++ |  | {nbsp}
| Connection Timeout a| Number |  +++Sets the socket connection timeout value for a connection to CICS TG. This timeout represents the maximum amount of time (in milliseconds) a managed connection will attempt to open a socket connection successfully to a remote Gateway daemon. The timeout is ignored for attempted connections to a local Gateway instance. A value of 0 represents no timeout.+++ |  +++0+++ | {nbsp}
| Response Timeout a| Number |  +++Set the response timeout value for a connection to CICS TG. This timeout represents the maximum amount of time (in milliseconds) a managed connection will attempt wait to response for a request. A value of 0 represents no timeout.+++ |  +++30000+++ | {nbsp}
| CTG Trace a| Boolean |  +++Turns all levels of CTG tracing on or off.+++ |  +++false+++ | {nbsp}
| Reconnection a| <<Reconnection>> |  +++When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy+++ |  | {nbsp}
| Pooling Profile a| <<PoolingProfile>> |  +++Characteristics of the connection pool+++ |  | {nbsp}
|======================

==== Associated Operations
* <<execute>> {nbsp}
* <<executeUsingCommarea>> {nbsp}
* <<executeWithMultipleChannels>> {nbsp}



== Operations

[[execute]]
=== Execute
`<ibmctg:execute>`


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Content a| Binary |  |  +++#[payload]+++ | {nbsp}
| Channel Request a| <<ChannelRequest>> |  |  | *x*{nbsp}
| Transactional Action a| Enumeration, one of:

** ALWAYS_JOIN
** JOIN_IF_POSSIBLE
** NOT_SUPPORTED |  +++The type of joining action that operations can take regarding transactions.+++ |  +++JOIN_IF_POSSIBLE+++ | {nbsp}
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* <<non-repeatable-stream>> |  +++Configure if repeatable streams should be used and their behaviour+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| Binary
|======================

==== For Configurations.
* <<config>> {nbsp}

==== Throws
* IBMCTG:ERR_GATEWAY {nbsp}
* IBMCTG:REQUEST_ERROR {nbsp}
* IBMCTG:RETRY_EXHAUSTED {nbsp}
* IBMCTG:ECOM {nbsp}
* IBMCTG:TRANSACTION {nbsp}
* IBMCTG:AEI0 {nbsp}
* IBMCTG:IBMCCExecution {nbsp}
* IBMCTG:SERVER_ERROR {nbsp}
* IBMCTG:CONNECTIVITY {nbsp}
* IBMCTG:CONNECTION_ERROR {nbsp}
* IBMCTG:UNKNOWN {nbsp}
* IBMCTG:ECI_ERR_INVALID_CALL_TYPE {nbsp}
* IBMCTG:ECI_ERR_SECURITY_ERROR {nbsp}
* IBMCTG:RESOURCE {nbsp}
* IBMCTG:ECI_ERR_NO_CICS {nbsp}


[[executeUsingCommarea]]
=== Execute Using Commarea
`<ibmctg:execute-using-commarea>`


==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Content a| Binary |  |  +++#[payload]+++ | {nbsp}
| Commarea Request Type a| <<CommareaRequest>> |  |  | *x*{nbsp}
| Transactional Action a| Enumeration, one of:

** ALWAYS_JOIN
** JOIN_IF_POSSIBLE
** NOT_SUPPORTED |  +++The type of joining action that operations can take regarding transactions.+++ |  +++JOIN_IF_POSSIBLE+++ | {nbsp}
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* <<non-repeatable-stream>> |  +++Configure if repeatable streams should be used and their behaviour+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| Binary
|======================

==== For Configurations.
* <<config>> {nbsp}

==== Throws
* IBMCTG:ERR_GATEWAY {nbsp}
* IBMCTG:REQUEST_ERROR {nbsp}
* IBMCTG:RETRY_EXHAUSTED {nbsp}
* IBMCTG:ECOM {nbsp}
* IBMCTG:TRANSACTION {nbsp}
* IBMCTG:AEI0 {nbsp}
* IBMCTG:IBMCCExecution {nbsp}
* IBMCTG:SERVER_ERROR {nbsp}
* IBMCTG:CONNECTIVITY {nbsp}
* IBMCTG:CONNECTION_ERROR {nbsp}
* IBMCTG:UNKNOWN {nbsp}
* IBMCTG:ECI_ERR_INVALID_CALL_TYPE {nbsp}
* IBMCTG:ECI_ERR_SECURITY_ERROR {nbsp}
* IBMCTG:RESOURCE {nbsp}
* IBMCTG:ECI_ERR_NO_CICS {nbsp}


[[executeWithMultipleChannels]]
=== Execute With Multiple Channels
`<ibmctg:execute-with-multiple-channels>`

+++
Calls a remote CICS program sending data encapsulated in channels and containers, allowing users to transfer more than 32 KB in a single request. A container is a named reference to a storage area managed by CICS that can hold any form of application data. A container can hold data in any format that the application requires and is limited only by the amount of storage available. An application can reference any number of containers. A channel is a uniquely named reference to a collection of containers. It is analogous to a COMMAREA, but it is not subject to its constraints. Programs can pass a single channel between them. You can think of a channel as a parameter list. The same channel can be passed from one program to another. Channels and containers are visible only to the program that creates them, and to the programs that they are passed to. When these programs end, CICS automatically deletes the containers and their storage. They are not recoverable. If you require to use recoverable containers, use CICS BTS containers.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Channel And Contents a| Array of <<ChannelAndContent>> |  +++A java.util.List of ChannelAndContent containing one or more pairs with channel and the details for request to CTG, such as: program name, TPN, encoding, channel name and its containers (request, response and error); with his respective content.+++ |  +++#[payload]+++ | {nbsp}
| Transactional Action a| Enumeration, one of:

** ALWAYS_JOIN
** JOIN_IF_POSSIBLE
** NOT_SUPPORTED |  +++The type of joining action that operations can take regarding transactions.+++ |  +++JOIN_IF_POSSIBLE+++ | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| Array of Binary
|======================

==== For Configurations.
* <<config>> {nbsp}

==== Throws
* IBMCTG:ERR_GATEWAY {nbsp}
* IBMCTG:REQUEST_ERROR {nbsp}
* IBMCTG:RETRY_EXHAUSTED {nbsp}
* IBMCTG:ECOM {nbsp}
* IBMCTG:TRANSACTION {nbsp}
* IBMCTG:AEI0 {nbsp}
* IBMCTG:IBMCCExecution {nbsp}
* IBMCTG:SERVER_ERROR {nbsp}
* IBMCTG:CONNECTIVITY {nbsp}
* IBMCTG:CONNECTION_ERROR {nbsp}
* IBMCTG:UNKNOWN {nbsp}
* IBMCTG:ECI_ERR_INVALID_CALL_TYPE {nbsp}
* IBMCTG:ECI_ERR_SECURITY_ERROR {nbsp}
* IBMCTG:RESOURCE {nbsp}
* IBMCTG:ECI_ERR_NO_CICS {nbsp}


[[createChannelAndContentInstance]]
=== Create Channel And Content Instance
`<ibmctg:create-channel-and-content-instance>`

+++
Create an instance of ChannelAndContent that will be used in the input list of the "Execute with multiple channels" operation
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Content a| Binary |  +++The input data to be passed to the CICS program.+++ |  | *x*{nbsp}
| Request a| <<ChannelRequest>> |  +++A ChannelRequest that contains the details for request to CTG, such as: program name, TPN, encoding, channel name and its containers (request, response and error).+++ |  | *x*{nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| <<ChannelAndContent>>
|======================


==== Throws
* IBMCTG:ERR_GATEWAY {nbsp}
* IBMCTG:REQUEST_ERROR {nbsp}
* IBMCTG:ECOM {nbsp}
* IBMCTG:TRANSACTION {nbsp}
* IBMCTG:AEI0 {nbsp}
* IBMCTG:IBMCCExecution {nbsp}
* IBMCTG:SERVER_ERROR {nbsp}
* IBMCTG:CONNECTIVITY {nbsp}
* IBMCTG:CONNECTION_ERROR {nbsp}
* IBMCTG:UNKNOWN {nbsp}
* IBMCTG:ECI_ERR_INVALID_CALL_TYPE {nbsp}
* IBMCTG:ECI_ERR_SECURITY_ERROR {nbsp}
* IBMCTG:RESOURCE {nbsp}
* IBMCTG:ECI_ERR_NO_CICS {nbsp}



== Types
[[Reconnection]]
=== Reconnection

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy |  | 
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> | The reconnection strategy to use |  | 
|======================

[[reconnect]]
=== Reconnect

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often (in ms) to reconnect |  | 
| Count a| Number | How many reconnection attempts to make |  | 
|======================

[[reconnect-forever]]
=== Reconnect Forever

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often (in ms) to reconnect |  | 
|======================

[[PoolingProfile]]
=== Pooling Profile

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max Active a| Number | Controls the maximum number of Mule components that can be borrowed from a session at one time. When set to a negative value, there is no limit to the number of components that may be active at one time. When maxActive is exceeded, the pool is said to be exhausted. |  | 
| Max Idle a| Number | Controls the maximum number of Mule components that can sit idle in the pool at any time. When set to a negative value, there is no limit to the number of Mule components that may be idle at one time. |  | 
| Max Wait a| Number | Specifies the number of milliseconds to wait for a pooled component to become available when the pool is exhausted and the exhaustedAction is set to WHEN_EXHAUSTED_WAIT. |  | 
| Min Eviction Millis a| Number | Determines the minimum amount of time an object may sit idle in the pool before it is eligible for eviction. When non-positive, no objects will be evicted from the pool due to idle time alone. |  | 
| Eviction Check Interval Millis a| Number | Specifies the number of milliseconds between runs of the object evictor. When non-positive, no object evictor is executed. |  | 
| Exhausted Action a| Enumeration, one of:

** WHEN_EXHAUSTED_GROW
** WHEN_EXHAUSTED_WAIT
** WHEN_EXHAUSTED_FAIL | Specifies the behavior of the Mule component pool when the pool is exhausted. Possible values are: "WHEN_EXHAUSTED_FAIL", which will throw a NoSuchElementException, "WHEN_EXHAUSTED_WAIT", which will block by invoking Object.wait(long) until a new or idle object is available, or WHEN_EXHAUSTED_GROW, which will create a new Mule instance and return it, essentially making maxActive meaningless. If a positive maxWait value is supplied, it will block for at most that many milliseconds, after which a NoSuchElementException will be thrown. If maxThreadWait is a negative value, it will block indefinitely. |  | 
| Initialisation Policy a| Enumeration, one of:

** INITIALISE_NONE
** INITIALISE_ONE
** INITIALISE_ALL | Determines how components in a pool should be initialized. The possible values are: INITIALISE_NONE (will not load any components into the pool on startup), INITIALISE_ONE (will load one initial component into the pool on startup), or INITIALISE_ALL (will load all components in the pool on startup) |  | 
| Disabled a| Boolean | Whether pooling should be disabled |  | 
|======================

[[ExpirationPolicy]]
=== Expiration Policy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration |  | 
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute |  | 
|======================

[[ChannelRequest]]
=== Channel Request

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Channel a| String | The name of the channel. Value is case-sensitive. |  | x
| Request Container a| String | The name of the container used to send the request data to the CICS program. Value is case-sensitive. |  | x
| Response Container a| String | The name of the container used to return the data obtained from the CICS program. Value is case-sensitive. |  | x
| Error Container a| String | The name of the container used to return error information if something goes wrong in the CICS program. Value is case-sensitive. |  | x
| Program Name a| String | The name of the CICS program to call. It is case-sensitive. |  | x
| Tpn Name a| String | The transaction identifier of the CICS mirror transaction. Optional. |  | 
| Encoding a| String | The data encoding. Default value is IBM037. | IBM037 | 
|======================

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Initial Buffer Size a| Number | This is the amount of memory that will be allocated in order to consume the stream and provide random access to it. If the stream contains more data than can be fit into this buffer, then it will be expanded by according to the bufferSizeIncrement attribute, with an upper limit of maxInMemorySize. |  | 
| Buffer Size Increment a| Number | This is by how much will be buffer size by expanded if it exceeds its initial size. Setting a value of zero or lower will mean that the buffer should not expand, meaning that a STREAM_MAXIMUM_SIZE_EXCEEDED error will be raised when the buffer gets full. |  | 
| Max Buffer Size a| Number | This is the maximum amount of memory that will be used. If more than that is used then a STREAM_MAXIMUM_SIZE_EXCEEDED error will be raised. A value lower or equal to zero means no limit. |  | 
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which all these attributes are expressed |  | 
|======================

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max In Memory Size a| Number | Defines the maximum memory that the stream should use to keep data in memory. If more than that is consumed then it will start to buffer the content on disk. |  | 
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB | The unit in which maxInMemorySize is expressed |  | 
|======================

[[CommareaRequest]]
=== Commarea Request

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Commarea Length a| Number | The length of COMMAREA. Default value is -1. This should be set to less than or equal to the length of the byte array passed in the payload. The maximum advised size is
 32500 bytes, as this is guaranteed to be flowed successfully across all protocols. COMMAREA sizes greater than this may generate an ECI_ERR_INVALID_DATA_LENGTH return code. | -1 | 
| Reply Length a| Number | The length of the data stream to be returned back from the Gateway daemon to the Mule (JCA) application. Default value is -1. Setting this property can reduce the data
 transmitted over the network if the data returned by CICS is less than the full COMMAREA size, and you know the size of the data in advance. | -1 | 
| Program Name a| String | The name of the CICS program to call. It is case-sensitive. |  | x
| Tpn Name a| String | The transaction identifier of the CICS mirror transaction. Optional. |  | 
| Encoding a| String | The data encoding. Default value is IBM037. | IBM037 | 
|======================

[[ChannelAndContent]]
=== Channel And Content

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Channel Request a| <<ChannelRequest>> |  |  | 
| Content a| Binary |  |  | 
|======================

