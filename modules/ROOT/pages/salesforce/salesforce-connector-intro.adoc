= Salesforce Connector
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

The Anypoint Salesforce Connector lets you connect to the Salesforce platform APIs. This connector exposes methods for accessing Salesforce, including working with the https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_dev_process_chapter.htm[Salesforce Apex classes].


== Prerequisites

This document assumes that you are familiar with Salesforce, HTTP, SOAP, REST, Bulk and Streaming APIs, Mule, Anypoint Connectors, Anypoint Studio, Mule concepts, elements in a Mule flow, and Global Elements.

Requirements for using the connector:

* https://developer.salesforce.com/[Salesforce developer account].
* Security token - You can receive a new security token by email if you run Reset Security Token through My Personal Information from the Salesforce Setup pages.
* Consumer key and Secret - Required if you are using the OAuth API.
* Namespace and schema location: If you plan to create the XML for your Mule application by hand, you need to include the correct namespace and schema location in your XML file. Anypoint Studio adds this information to the XML file automatically when you add the Salesforce connector to a flow in a Mule app.

Notes:

* This connector does not expose all possible operations of the Salesforce APIs.
* This connector does not provide access to the Chatter REST API or the Tooling API.
* See:
** http://blogs.developerforce.com/tech-pubs/2011/10/salesforce-apis-what-they-are-when-to-use-them.html[Salesforce APIs: What they are and when to use them]
** https://help.salesforce.com/HTViewHelpDoc?id=integrate_what_is_api.htm[Which API should I use?]

== Document Set

The topics in this documentation set are:

[%header%autowidth.spread]
|===
|Topic |Description
|Introduction (current page) |This document, which describes prerequisites, how to develop an application with this connector, and related templates and examples available in Anypoint Exchange.
|xref:salesforce-connector-xml.adoc[XML Support or Standalone] |Configure this connector using only XML or for a standalone Mule runtime.
|xref:salesforce-connector-dc.adoc[Configure in Design Center] |Configure a project with this connector using the Design Center feature of Anypoint Platform.
|xref:salesforce-connector-studio.adoc[Configure in Studio] |Configure a project with this connector in Anypoint Studio. Studio provides visual and XML editors for creating applications.
|xref:salesforce-connector-extras.adoc[Advanced Configuration] |More information about this connector for coding in Studio or XML.
|xref:salesforce-connector-use-cases.adoc[Use Cases] |Ways you can use this connector immediately with all steps necessary to create a working project in Studio or in XML.
|xref:salesforce-connector-reference.adoc[Reference] |Detailed information about Studio fields.
|===

== Develop a Salesforce Application

This connector works with the Salesforce SOAP API, REST API, Bulk API, and Streaming API, depending on the operation you configure. Each API call uses an XML request and response over an HTTPS connection. All required request headers, error handling, and HTTPS connection configurations are built into the connector.

There are three ways to use a Salesforce connector in your application: as an outbound connector, an inbound connector, or a streaming inbound connector. 


Build an application in this order:

. Configure the connector.
. Test the connection.
. Build the rest of your flow.
. Add and configure DataWeave.

=== Integration Patterns

You can use these integration patterns with your application:

* Batch Data Synchronization - An external system accesses, changes, deletes, or adds data in Salesforce in batches, and vice versa (Salesforce to external system).
* Remote Call-In - An external system accesses, changes, deletes or adds data in Salesforce, and vice versa (Salesforce to external system).
* Fire and Forget Remote Process Invocation - Salesforce initiates a process in a third-party system and receives an acknowledgment that the process has started. The third-party system continues processing independent of Salesforce.
* Request-Reply Remote Process Invocation - Salesforce kicks off a process in a remote system, waits for the remote system to finish processing, then accepts control back again from the remote system.
* User Interface Update Based on Data Changes - The Salesforce UI updates in response to a change in a third-party system.

=== Supported APIs

This connector supports these Salesforce APIs:

* https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_dev_guide.htm[Apex SOAP API]: Exposes Apex class methods as custom SOAP Web service calls. This allows an external application to invoke an Apex Web service to perform an action in Salesforce.
* https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_integration_intro.htm[Apex REST API]: Creates your own REST-based web services using Apex. It has all of the advantages of the REST architecture, and provides the ability to define custom logic and includes automatic argument/object mapping.
* https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/asynch_api_intro.htm[Bulk API]: Quickly and securely load batches of your organization’s data into Salesforce. See also: xref:salesforce-connector-extras.adoc#load-data-in-batches[Load Data in Batches].
* http://www.salesforce.com/us/developer/docs/api_meta/[Metadata API]: Manages customizations and build tools that work with the metadata model, not the data itself.
* http://www.salesforce.com/us/developer/docs/api/index.htm[SOAP API]: Provides secure access to your organization’s information on Salesforce. Most of the operations that the Salesforce connector performs map to this API. All the Salesforce operations performed through the SOAP API have an optional parameter called "Headers" that can take any of the following Salesforce SOAP Headers: AllOrNoneHeader, AllowFieldTruncationHeader, AssignmentRuleHeader, CallOptions, EmailHeader, LocaleOptions, MruHeader, OwnerChangeOptions, QueryOptions, UserTerritoryDeleteHeader, DuplicateRuleHeader
* https://developer.salesforce.com/docs/atlas.en-us.api_streaming.meta/api_streaming/intro_stream.htm[Streaming API]: Securely receives notifications for changes to your organization’s information in Salesforce. See Receiving Inbound Data From Salesforce for more information on the use of the Streaming API.

== Application Development Notes

The sections that follow provide connector operations notes.

=== Currency

Currency values cannot exceed 18 characters in length.
When working with multiple currencies, be aware of which currency your sObject uses so that you avoid inaccurate entries. The default currency matches the location at the organization level.

=== Evaluate Values in a Salesforce Drop-down

If you are evaluating against a value in an existing drop-down list field in Salesforce, be sure to use the exact value in the dropdown. For example, if you use the value "US" to evaluate against the contents of a drop-down list that contains the value "USA", the evaluation works, but you end up with two values in the dropdown: one for US and one for USA.

=== Fields To Null

Configurations have a checkbox called Can Clear Fields by Updating Field Value to Null. If checked, all the fields in a request that have a Null value are added to the fieldsToNull field and sent to Salesforce.

You can decide which fields to set to Null without being forced to use the fieldsToNullfield.

=== Insert Values in a Salesforce Drop-down

Be aware that inserting dependent values into an existing drop-down list field in Salesforce does not always work. Test to confirm functionality.

=== Limits on API Calls

You need to know the rate limiting policy that applies to your account so that you do not exceed the number of allotted API calls per day.

=== Opportunity sObject

When extracting data from an Opportunity, be aware that a "quarter" is not relative to a calendar year. A "quarter" in this context is relative to the financial year of the organization.

=== Query

Even though you can see the fields of an SObject and their corresponding types via DataSense, the Query operation returns all fields as String.

If you want to use the actual type of the field, you must convert that field to the desired type using a Transform (or Transform Message) component.

Although CreatedDate field appears as dateTime, the query returns a String representing the date.
To actually use the field as a dateTime, you can configure it using Transform Message, like in the example.

To store Date and DateTime fields, you can use DataWeave expressions to create Date and Calendar Java objects.

=== Upsert

Unless you configure the External ID Field Name for the sObject to which you are trying to Upsert, every use of the upsert fails.

The Upsert operation does not work with the sObject priceBookentry2.

While you can’t change the contentType for bulk upsert, you can use Create Job to set the contentType to either CSV or zipped CSV (if you’re hitting the character limit). Follow up with Create Batch.

== Salesforce Templates

You can add Exchange Salesforce templates to an Anypoint Studio project by clicking the Exchange button in the Studio taskbar.

=== Aggregation Templates

* https://www.mulesoft.com/exchange/org.mule.templates/template-error-handling-scatter-gather/[
Salesforce and Database Account Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2db-user-aggregation/[Salesforce and Database User Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2msdyn-contact-aggregation/[Salesforce and Microsoft Dynamics CRM Contact Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2nets-opportunity-aggregation/[Salesforce and NetSuite Opportunity Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sieb-account-aggregation/[Salesforce and Oracle Siebel Account Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sieb-contact-aggregation/[Salesforce and Oracle Siebel Contact Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sap2sfdc-account-aggregation/[Salesforce and SAP Account Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sap-opportunity-aggregation/[Salesforce and SAP Opportunity Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sap-product-aggregation/[Salesforce and SAP Product Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-account-aggregation/[Salesforce Org to Org Account Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-contact-aggregation/[Salesforce Org to Org Contact Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-lead-aggregation/[Salesforce Org to Org Lead Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-opportunity-aggregation/[Salesforce Org to Org Opportunity Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-user-aggregation/[Salesforce Org to Org User Aggregation]
* https://www.mulesoft.com/exchange/org.mule.templates/template-wday2sfdc-worker-aggregation/[Workday and Salesforce Worker Aggregation]

=== API Templates

* https://www.mulesoft.com/exchange/org.mule.templates/template-apiled-process-account-migration/[Account Migration Process API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-apiled-system-account-sfdc/[Account System API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-healthcare-ehr-appointments-process-api/[Appointment Process API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-healthcare-sfhc2fhir-system-api/[CRM FHIR API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-retail-customers2sfdc-system-api/[Customer System API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-healthcare-ehr2crm-sync-process-api/[EHR to CRM Sync Process API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-healthcare-sfhc-experience-api/[Experience API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-healthcare-fitness2crm-sync-process-api/[Fitness Data Sync Process API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-healthcare-fitbit2fhir-system-api/[Fitness FHIR API]
* https://www.mulesoft.com/exchange/org.mule.templates/template-retail-orders2sfdc-system-api/[Order API]

=== Bidirectional Sync Templates

* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2db-account-bidirectional-sync[Salesforce and Database Account Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2db-user-bidirectional-sync[Salesforce and Database User Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2msdyn-account-bidirectional-sync/[Salesforce and Microsoft Dynamics CRM Account Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sap2sfdc-customer-bidirectional-sync/[Salesforce and SAP Account Customer Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sap-product-bidirectional-sync/[Salesforce and SAP Product Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2wday-user-bidirectional-sync/[Salesforce and Workday User Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-account-bidirectional-sync/[Salesforce Org to Org Account Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-contact-bidirectional-sync[Salesforce Org to Org Contact Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-casecustomobject-bidirectional-sync/[Salesforce Org to Org Custom Object Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-opportunity-bidirectional-sync/[Salesforce Org to Org Opportunity Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-user-bidirectional-sync/[Salesforce Org to Org User Bidirectional Sync]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sieb-account-bidirectional-sync/[Salesforce to Siebel Account Bidirectional]

=== Broadcast Templates

* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-db2sfdc-account-broadcast/[Database to Salesforce Account Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-mkto2sfdc-lead-broadcast/[Marketo to Salesforce Lead Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-msdyn2sfdc-account-broadcast/[Microsoft Dynamics to Salesforce Account Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-nets2sfdc-customer2account-broadcast/[NetSuite to Salesforce Account to Customer Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sieb-contact-broadcast/[Oracle Salesforce to Siebel Contact Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sieb2sfdc-account-broadcast/[Oracle Siebel to Salesforce Account Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sieb2sfdc-contact-broadcast/[Oracle Siebel to Salesforce Contact Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sfdc-account-broadcast/[Salesforce Org to Org Account Broadcast]
* [Salesforce Org to Org Contact Broadcast]
* [Salesforce Org to Org Custom Object Broadcast]
* [Salesforce Org to Org Lead Broadcast]
* [Salesforce Org to Org Opportunity Broadcast]
* [Salesforce Org to Org User Broadcast]
* [Salesforce to Database Account Broadcast]
* [Salesforce to Database User Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2msdyn-contact-broadcast/[Salesforce to Microsoft Dynamics Account Broadcast]
* [Salesforce to Microsoft Dynamics Contact Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2nets-account2customer-broadcast/[Salesforce to NetSuite Account - Customer Broadcast]
* [Salesforce to NetSuite Opportunity - Sales Order Broadcast]
* https://anypoint.mulesoft.com/exchange/org.mule.templates/template-sfdc2sieb-account-broadcast/[Salesforce to Oracle Siebel Account Broadcast]
* [Salesforce to Salesforce and Database Account Broadcast]
* [Salesforce to Salesforce, Workday, SAP, and Database Account Broadcast]
* [Salesforce to SAP Account Broadcast]
* [Salesforce to SAP Opportunity Broadcast]
* [Salesforce to SAP Product Broadcast]
* [Salesforce to Workday Financials Account - Customer Broadcast]
* [Salesforce to Workday Financials Account - Prospect Broadcast]
* [Salesforce to Workday Financials Opportunity Broadcast]
* [SAP to Salesforce Contact Broadcast]
* [SAP to Salesforce Customer Broadcast]
* [SAP to Salesforce Product Material Broadcast]
* [Workday to Salesforce Employee Role Change Broadcast]
* [Workday to Salesforce Employee Update Broadcast]
* [Workday to Salesforce Hired Employee Broadcast]
* [Workday to Salesforce Terminated Employee Broadcast]
* [Workday to Salesforce Worker Case Broadcast]

=== Migration Templates

* [Database to Salesforce Account Migration]
* [Database to Salesforce Contact Migration]
* [Database to Salesforce User Migration]
* [Microsoft Dynamics to Salesforce Contact Migration]
* [Oracle Siebel to Salesforce Account Migration]
* [Oracle Siebel to Salesforce Contact Migration]
* [Salesforce and NetSuite Opportunity Migration]
* [Salesforce Org to Org Account Migration]
* [Salesforce Org to Org Contact Migration]
* [Salesforce Org to Org Custom Object Migration]
* [Salesforce Org to Org Lead Migration]
* [Salesforce Org to Org Opportunity Migration]
* [Salesforce Org to Org User Migration]
* [Salesforce to Database Account Migration]
* [Salesforce to Database Contact Migration]
* [Salesforce to Marketo Lead Migration]
* [Salesforce to Oracle Siebel Account Migration]
* [Salesforce to Oracle Siebel Contact Migration]
* [Salesforce to SAP Account Migration]
* [Salesforce to SAP Opportunity Migration]
* [Salesforce to Workday Financials Account - Customer Migration]
* [Salesforce to Workday Financials Account - Prospect Migration]
* [SAP to Salesforce Contact Migration]
* [SAP to Salesforce Customer Migration]
* [SAP to Salesforce Product Material Migration]
* [Workday to Salesforce Sales Item - Product Migration]
* [Workday to Salesforce Worker Migration]

== See Also

MuleSoft Forum
Contact MuleSoft Support
Access the Salesforce developer documentation for detailed documentation on Salesforce objects and queries.