= Salesforce - Upgrade and Migrate - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

Upgrade Anypoint Connector for Salesforce (Salesforce Connector) to version 10.0.0.

== Supported Upgrade Paths

[%header,cols="50a,50a"]
|===
|From Version | To Version
|9.8.x |10.0.0
|===

== Changes in This Release

This release contains the following changes:

* Removed deprecated connection providers
* Merged multiple operations into one
* Re-designed the Replay ID functionality
* Changed the Mule TLSContext usage ???
* Removed the Dozer library ???
* Improved the error types

== Changes in Connection Providers

This release contains the following changes:

* Removed the connection providers that used the pooling connection, which were deprecated
* Added new tabs in Salesforce Config and reordered the parameters in a more intuitive way
* Added the Connection Pool Config tab to improve multi-threading support while running operations. This tab contains three parameters to help you manage the application connection objects.
* Moved the Read timeout parameter from the provider configuration to the connector configuration. It has a default value of 0 seconds, which means infinite. You can override this value by using the Advanced tab.
* Removed the following parameters:
** Advanced Reconnection Params
** Assigment Rule Id
** Client Id
** Time Object Store
** Batch Sobject Max Depth
** Disable session invalidation
** Allow field truncation support
** Use default rule
** Can Clear Fields by Updating Field value to Null

== Changed Operations, Parameters, and Return Types

In Salesforce 10.0, all operations contain the following new parameters:

* Time unit
* Read timeout

The following table shows other changes to operation names, input parameters, and return types:

// [cols="50,50"]
[%header%autowidth.spread]
|===
|Salesforce 9.8 Operation | Changes in Salesforce 10.0

| Abort job v 2
a| Operation renamed Abort job bulk api v2

| Abort query job
a|  * Operation renamed Abort query job bulk api v2
* Query job id parameter renamed Id

| Batch result
a| Return type is now BulkOperationResult, which can be integrated with the Batch Scope

| Batch result stream
a| Return type is now InputStream

| Create
a| Return type is now BulkOperationResult instead of a list of results

| Delete
a| Return type is now BulkOperationResult instead of a list of results

| Find duplicates By ids
a| List of object ids used when searching for duplicates parameter is now Ids List

| Get all jobs v 2
a| * Operation renamed Get all jobs bulk api v2
* Is pk chunking enabled parameter renamed Pk Chunking

| Get all query jobs
a| Operation renamed Get all query jobs bulk api v2

| Get bulk job state bulk v 2
a| Operation renamed Get job state bulk api v2

| Get bulk job state bulk v 2
a| * Operation renamed Get query job result bulk api v2
* Query job id parameter renamed Id

| Get deleted
a| * Duration parameter is replaced by the Start Date and End date parameters
* Type parameter is renamed Object type

| Get query job info
a| * Operation renamed Get query job info bulk api v2
* Query job id parameter renamed Id

| Get updated
a| * Operation renamed Get updated objects
* Duration parameter is replaced by Start Date and End date
* Type parameter renamed Object Type

| Replay channel
a| Operation renamed Replay channel listener

| Replay topic
a| Operation renamed Replay topic listener

| Retrieve record failure bulk v 2
a| Operation renamed Retrieve job failed result bulk v2

| Retrieve record success bulk v 2
a| Operation renamed Retrieve job successful result bulk v2

| Update
a| List of results is replaced by BulkOperationResult

| Upsert
a| Type parameter renamed Object Type

|===

== Changes in Operations Metadata

There are no changes related to keys, input/output metadata.

== Removed Operations

Four operations were removed from the Salesforce connector and are available in the new connector.

//[cols="15%,35%,15%]
|===
3+|Removed in Salesforce 10.x
|Name	|Reason for removal|Functionality covered by

| Create single | Create
| Create multiple | Create
| Create bulk | Create Job with INSERT operation parameter + Create Batch
| Update single	| Update
| Update multiple | Update
| Update bulk | Create Job with UPDATE operation parameter + Create Batch
| Upsert multiple | Upsert
| Upsert bulk | Create Job with UPSERT operation parameter + Create Batch
| Delete multiple | |Delete
| Hard delete bulk | Create Job with HARD DELETE operation parameter + Create Batch
| Query single | Query
| Non paginated query | Query
| Get updated objects | Get updated objects + Retrieve
| Get updated | Get updated objects
| Get deleted range | Get deleted objects
| Create bulk for query | Create batch for query
| Create multiple bulk | Create Job with CREATE operation parameter + Create Batch
| Update multiple bulk | Create Job with UPDATE operation parameter + Create Batch
| Upsert multiple bulk | Create Job with UPSERT operation parameter + Create Batch
| Hard delete multiple | Create Job with HARD DELETE operation parameter + Create Batch
| Create multiple batch | Create batches
| Create multiple batch stream | Create batch stream
| Bulk result | Batch result
| Bulk result stream|Batch result stream
| Bulk info | Batch info
| Query multiple result stream | Query result stream
| Bulk info list | Batch info list
|===

== Upgrade Steps

. Create a backup of your files, data, and configuration in case you need to restore to the previous version.
. Follow these steps to perform the upgrade to Salesforce Connector 10.0.0:

.. In Studio, create a Mule project.
.. In the Mule Palette view, click *Search in Exchange*.
.. In Add Modules to Project, type 'Salesforce 10' in the search field.
.. In Available modules, select *Salesforce Connector 10.0.0*, and then click *Add*.
.. Click *Finish*.
.. Verify that the `salesforce-connector` dependency version is `10.0.0` in the pom.xml.

Anypoint Studio upgrades the connector automatically.


== Verify the Upgrade

After you install the latest version of the connector, follow these steps to verify the upgrade:

. In Anypoint Studio, verify that there are no errors in the *Problems* or *Console* views.
. Check the project pom.xml and verify that there are no problems.
. Test the connection and verify that the operations work.

== Troubleshooting

If there are problems with caching the parameters and caching the metadata, try restarting Anypoint Studio.

== Reverting the Upgrade

If it is necessary to revert to the previous version of Salesforce Connector, change the `salesforce-connector` dependency version `10.0.0` in the project's pom.xml to the previous version.

You must update the project's pom.xml in Anypoint Studio.


== See Also

https://help.mulesoft.com[MuleSoft Help Center]
