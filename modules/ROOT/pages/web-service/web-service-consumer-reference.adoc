= Web Service Consumer Connector Reference

+++
Web Service Consumer extension used to consume SOAP web services.
+++


== Configurations
---
[[config]]
=== Config

+++
Default configuration
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | *x*{nbsp}
| Connection a| <<config_connection, Connection>>
 | The connection types that can be provided to this configuration. | | *x*{nbsp}
| Expiration Policy a| <<ExpirationPolicy>> |  +++Configures the minimum amount of time that a dynamic configuration instance can remain idle before the runtime considers it eligible for expiration. This does not mean that the platform will expire the instance at the exact moment that it becomes eligible. The runtime will actually purge the instances when it sees it fit.+++ |  | {nbsp}
|======================

==== Connection Types
[[config_connection]]
===== Connection

+++
ConnectionProvider that returns instances of SoapClient.
+++

====== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Soap Version a| Enumeration, one of:

** SOAP11
** SOAP12 |  +++The soap version of the WSDL.+++ |  +++SOAP11+++ | {nbsp}
| Mtom Enabled a| Boolean |  +++If should use the MTOM protocol to manage the attachments or not.+++ |  +++false+++ | {nbsp}
| Transport Configuration a| One of:

* <<http-transport-configuration>>
* <<DefaultHttpTransportConfiguration>> |  +++The transport configuration used to dispatch the SOAP messages.+++ |  | {nbsp}
| Wsdl Location a| String |  +++The WSDL file URL remote or local.+++ |  | *x*{nbsp}
| Service a| String |  +++The service name.+++ |  | *x*{nbsp}
| Port a| String |  +++The port name.+++ |  | *x*{nbsp}
| Address a| String |  +++The address of the web service.+++ |  | {nbsp}
| Reconnection a| <<Reconnection>> |  +++When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy+++ |  | {nbsp}
| Sign Security Strategy a| <<WssSignSecurityStrategyAdapter>> |  +++a sign WSS configuration+++ |  | {nbsp}
| Verify Signature Security Strategy a| <<WssVerifySignatureSecurityStrategyAdapter>> |  +++a verify signature WSS configuration+++ |  | {nbsp}
| Username Token Security Strategy a| <<WssUsernameTokenSecurityStrategyAdapter>> |  +++a usernameToken WSS configuration+++ |  | {nbsp}
| Outgoing Timestamp Security Strategy a| <<WssTimestampSecurityStrategyAdapter>> |  +++a timestamp WSS configuration+++ |  | {nbsp}
| Decrypt Security Strategy a| <<wss-decrypt-security-strategy>> |  +++a decrypt WSS configuration+++ |  | {nbsp}
| Encrypt Security Strategy a| <<WssEncryptSecurityStrategyAdapter>> |  +++an encrypt WSS configuration+++ |  | {nbsp}
| Incoming Timestamp Security Strategy a| <<WssIncomingTimestampSecurityStrategyAdapter>> |  +++a timestamp verification WSS configuration+++ |  | {nbsp}
|======================

==== Associated Operations
* <<consume>> {nbsp}



== Operations

[[consume]]
=== Consume
`<wsc:consume>`

+++
Consumes an operation from a SOAP Web Service.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Operation a| String |  +++the name of the web service operation that aims to invoke.+++ |  | *x*{nbsp}
| Body a| Binary |  +++The XML body to include in the SOAP message, with all the required parameters, or null if no params are required.+++ |  +++#[payload]+++ | {nbsp}
| Headers a| Binary |  +++The XML headers to include in the SOAP message.+++ |  | {nbsp}
| Attachments a| Object |  +++The attachments to include in the SOAP request.+++ |  | {nbsp}
| Headers a| Object |  +++A group of transport headers that will be bounded with the transport request.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  +++A retry strategy in case of connectivity errors+++ |  | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| <<SoapOutputEnvelope>>
| *Attributes Type* a| <<SoapAttributes>>
|======================

==== For Configurations.
* <<config>> {nbsp}

==== Throws
* WSC:SOAP_FAULT {nbsp}
* WSC:TIMEOUT {nbsp}
* WSC:BAD_RESPONSE {nbsp}
* WSC:BAD_REQUEST {nbsp}
* WSC:CONNECTIVITY {nbsp}
* WSC:CANNOT_DISPATCH {nbsp}
* WSC:RETRY_EXHAUSTED {nbsp}
* WSC:ENCODING {nbsp}
* WSC:INVALID_WSDL {nbsp}



== Types
[[Reconnection]]
=== Reconnection

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Fails Deployment a| Boolean | When the application is deployed, a connectivity test is performed on all connectors. If set to true, deployment will fail if the test doesn't pass after exhausting the associated reconnection strategy |  | 
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> | The reconnection strategy to use |  | 
|======================

[[reconnect]]
=== Reconnect

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often (in ms) to reconnect |  | 
| Count a| Number | How many reconnection attempts to make |  | 
|======================

[[reconnect-forever]]
=== Reconnect Forever

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often (in ms) to reconnect |  | 
|======================

[[WssSignSecurityStrategyAdapter]]
=== Wss Sign Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Key Store Configuration a| <<wss-key-store-configuration>> | The keystore to use when signing the message. |  | x
| Sign Algorithm Configuration a| <<WssSignConfigurationAdapter>> | The algorithms to use on the signing. |  | 
|======================

[[wss-key-store-configuration]]
=== Wss Key Store Configuration

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Key Store Path a| String |  |  | x
| Alias a| String |  |  | x
| Password a| String |  |  | x
| Key Password a| String |  |  | 
| Type a| String |  | jks | 
|======================

[[WssSignConfigurationAdapter]]
=== Wss Sign Configuration

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Signature Key Identifier a| Enumeration, one of:

** ISSUER_SERIAL
** DIRECT_REFERENCE
** X509_KEY_IDENTIFIER
** THUMBPRINT
** SKI_KEY_IDENTIFIER
** KEY_VALUE |  | ISSUER_SERIAL | 
| Signature Algorithm a| Enumeration, one of:

** RSAwithSHA256
** ECDSAwithSHA256
** DSAwithSHA1
** RSAwithSHA1
** RSAwithSHA224
** RSAwithSHA384
** RSAwithSHA512
** ECDSAwithSHA1
** ECDSAwithSHA224
** ECDSAwithSHA384
** ECDSAwithSHA512
** DSAwithSHA256 |  |  | 
| Signature Digest Algorithm a| Enumeration, one of:

** SHA1
** SHA256
** SHA224
** SHA384
** SHA512 |  | SHA1 | 
| Signature C14n Algorithm a| Enumeration, one of:

** CanonicalXML_1_0
** CanonicalXML_1_1
** ExclusiveXMLCanonicalization_1_0 |  | ExclusiveXMLCanonicalization_1_0 | 
| Wss Parts a| Array of <<wss-part>> |  |  | 
|======================

[[wss-part]]
=== Wss Part

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Encode a| Enumeration, one of:

** ELEMENT
** CONTENT |  | CONTENT | 
| Namespace a| String |  |  | x
| Localname a| String |  |  | x
|======================

[[WssVerifySignatureSecurityStrategyAdapter]]
=== Wss Verify Signature Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Trust Store Configuration a| <<wss-trust-store-configuration>> | The truststore to use to verify the signature. |  | 
|======================

[[wss-trust-store-configuration]]
=== Wss Trust Store Configuration

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Trust Store Path a| String |  |  | x
| Password a| String |  |  | x
| Type a| String |  | jks | 
|======================

[[WssUsernameTokenSecurityStrategyAdapter]]
=== Wss Username Token Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Username a| String | The username required to authenticate with the service. |  | x
| Password a| String | The password for the provided username required to authenticate with the service. |  | x
| Password Type a| Enumeration, one of:

** DIGEST
** TEXT | A #password parameter. | TEXT | 
| Add Nonce a| Boolean | Specifies a if a cryptographically random nonce should be added to the message. | false | 
| Add Created a| Boolean | Specifies if a timestamp should be created to indicate the creation time of the message. | false | 
|======================

[[WssTimestampSecurityStrategyAdapter]]
=== Wss Timestamp Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Time To Live a| Number | The time difference between creation and expiry time in the time unit specified in timeToLiveUnit.
 After this time the message is invalid.
 <p>
 This parameter values must be greater or equal to 1 second (or similar in other unit).
 Values lower than 1 second will end up in 1 second timestamp. | 60 | 
| Time To Live Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A #timeToLive parameter.
 <p>
 Defaults to SECONDS | SECONDS | 
|======================

[[wss-decrypt-security-strategy]]
=== Wss Decrypt Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Key Store Configuration a| <<wss-key-store-configuration>> | The keystore to use when decrypting the message. |  | x
|======================

[[WssEncryptSecurityStrategyAdapter]]
=== Wss Encrypt Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Key Store Configuration a| <<wss-key-store-configuration>> | The keystore to use when encrypting the message. |  | x
| Encryption Algorithms Configuration a| <<wss-encryption-algorithms-configuration>> |  |  | 
|======================

[[wss-encryption-algorithms-configuration]]
=== Wss Encryption Algorithms Configuration

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Encryption Key Identifier a| Enumeration, one of:

** ISSUER_SERIAL
** DIRECT_REFERENCE
** X509_KEY_IDENTIFIER
** THUMBPRINT
** SKI_KEY_IDENTIFIER
** ENCRYPTED_KEY_SHA1
** EMBEDDED_KEY_NAME |  | ISSUER_SERIAL | 
| Encryption Sym Algorithm a| Enumeration, one of:

** TRIPLE_DES
** AES_128
** AES_256
** AES_192
** AES_128_GCM
** AES_192_GCM
** AES_256_GCM |  | AES_128 | 
| Encryption Key Transport Algorithm a| Enumeration, one of:

** KEYTRANSPORT_RSA15
** KEYTRANSPORT_RSAOAEP
** KEYTRANSPORT_RSAOAEP_XENC11 |  | KEYTRANSPORT_RSAOAEP | 
| Encryption Digest Algorithm a| Enumeration, one of:

** SHA1
** SHA256
** SHA384
** SHA512 |  | SHA1 | 
| Wss Part Adapters a| Array of <<wss-part>> |  |  | 
|======================

[[WssIncomingTimestampSecurityStrategyAdapter]]
=== Wss Incoming Timestamp Security Strategy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Future Time To Live a| Number | Specifies the time in the future within which the Created time of an incoming Timestamp is valid. The default
 value is "60", to avoid problems where clocks are slightly askew. To reject all future-created Timestamps, set
 this value to "0". | 60 | 
| Future Time To Live Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A #futureTimeToLive parameter.
 <p>
 Defaults to SECONDS | SECONDS | 
|======================

[[ExpirationPolicy]]
=== Expiration Policy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration |  | 
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute |  | 
|======================

[[SoapOutputEnvelope]]
=== Soap Output Envelope

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Attachments a| Object |  |  | 
| Body a| Binary |  |  | 
| Headers a| Object |  |  | 
|======================

[[SoapAttributes]]
=== Soap Attributes

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Protocol Headers a| Object | The protocol headers bundled in the response. |  | x
| Additional Transport Data a| Object | The additional transport data bundled in the response. |  | x
|======================

[[http-transport-configuration]]
=== Http Transport Configuration

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Requester Config a| String |  |  | x
|======================

[[DefaultHttpTransportConfiguration]]
=== Default Http Transport Configuration

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Timeout a| Number |  | 5000 | 
|======================

