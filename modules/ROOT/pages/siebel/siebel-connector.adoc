= Siebel Connector
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

_Premium_

The Anypoint Connector for Siebel lets you access connections between Mule integration applications and the Oracle Siebel customer relationship manager (CRM).

The Siebel Connector has only one option for connecting with Siebel applications, which are categorized by Siebel Objects and Services.

* Oracle Siebel Business Objects: Create, update, upsert, query, and delete Siebel business components.
* Oracle Siebel Integration Objects: Create, update, upsert, query, delete, query page, execute, and synchronize Siebel integration objects.
* Oracle Siebel Business Services: Execute Siebel business services.

All options are available after installing the Siebel connector.

The Siebel connector is built using the Siebel Java Data Beans interface. Java Data Beans provides a native Java interface to access the Siebel Object Manager.

The Siebel Object Manager lets a connector use a generic interface that does not depend on a customized installation. To discover the metadata of Siebel objects in design time, use DataSense in Anypoint Studio. The Siebel connector takes advantage of the Siebel Repository to show a list of available objects as well as their structures in a Siebel custom installation.

The objects can be business components, business objects, integration objects, or business services.

== Prerequisites

This document assumes that you are familiar with Mule, Anypoint Connectors, Anypoint Studio, Mule concepts, elements in a Mule flow, and Global Elements.

You need login credentials to test your connection to your target resource.

To use this connector with Maven, view the pom.xml dependency information in
the Dependency Snippets in Anypoint Exchange.

Because of how closely the connector is coupled with Siebel CRM, this document assumes you have a working knowledge of Siebel Business Components, Business Objects, Business Services, and Integration Objects.

The Siebel connector requires the following two Siebel JAR files: `Siebel.jar` and `SiebelJI_xxx`.

Choose the SiebelJI_xxx.jar based on the locale of the Siebel installation. For instance, if the locale of Siebel installation is US_EN, use `SiebelJI_enu.jar`.
The `Siebel.jar` and `SiebelJI_enu.jar` are available in the `<%SIEBEL_HOME%>\8.1.1.11\Tools_1\CLASSES` folder on the Siebel server.  `%SIEBEL_HOME%` is the installation directory of Siebel.

== What's New in this Connector

The only feature we can mention is the fact that the connector now is a conglomerate of the previous 3 modules (Oracle Siebel Business Objects, Oracle Siebel Integration Objects, Oracle Siebel Business Services)

== To Connect in Design Center

. In Design Center, click Set Up > Upload, browse for and select the driver for this connector on your file system, and upload it. Alternatively, search for and select a driver that is already uploaded.
. Click a trigger. You can create a global element by selecting this connector as they trigger.
If a global element is not needed, you can use an HTTP Listener or Scheduler trigger.
. To create an optional global element for the connector, set these fields:
+
image::siebel/siebel-dc-config.png[optional global element]
+
** Name - Enter a name for this Configuration to reference it later.
** User - Enter the Siebel username to be used.
** Password - Enter the corresponding Siebel password.
** Server - Enter the server IP address of your Siebel instance.
** Port - Enter the port number. Default value is 2321.
** Server Name - Enter the Siebel Enterprise server name.
** RSA Encryption - Choose if you want to use RSA encryption. Default value is false.
** Object Manager - Enter the value of the Object Manager of your Siebel instance.
** Language - Enter the language corresponding to the locale of the Siebel instance. The default value is `ENU`.
** Encoding - Enter an encoding type supported by the Siebel server. The default value is `utf8`.
+
. Select the plus sign to add a component.
. Select the connector as a component.
. Configure these fields:
+
image::siebel/siebel-dc-operation.png[Siebel operations list in Design Center]
+
** Select the connector configuration that you previously created.
** Fill the fields of the operation that you are using accordingly.

=== Add Libraries for this Connector

. Go to the connector's Global Configuration.
. Click Set Up under the message to setup drivers.
. Upload and select your libraries.
+
image::siebel/siebel-dc-libs.png[Select libraries]

== Connect in Anypoint Studio 7

You can use this connector in Anypoint Studio by first downloading it from Exchange
and configuring it as needed.

=== Install Connector in Studio

. In Anypoint Studio, click the Exchange icon in the Studio taskbar.
. Click Login in Anypoint Exchange.
. Search for this connector and click Install.
. Follow the prompts to install this connector.

When Studio has an update, a message displays in the lower right corner,
which you can click to install the update.

=== Configure in Studio

. Drag and drop the operation you want to execute to the Studio canvas.
. To create a new configuration for the Siebel connector, click the plus button in the Basic Settings area.
+
image::siebel/siebel-studio-create-config.png[Studio Create Config]
+
. Fill in the data in the configuration form.
+
image::siebel/siebel-studio-config.png[studio-siebel-config]
+
.. For the Required Libraries sections, you have to add the Siebel.jar and SiebelJI_xxx libraries that you previously downloaded.
+
image::siebel/siebel-studio-add-jar.png[Add JAR files to Studio]
+
After you click Finish, the library is added as a dependency, but the Global Element Properties window does not change, just in case you want to add more dependencies throughout the Maven Dependency UI.
+
.. For the configuration section, the fields are:
+
** Name - Enter a name for this Configuration to reference it later.
** User - Enter the Siebel username to be used.
** Password - Enter the corresponding Siebel password.
** Server - Enter the server IP address of your Siebel instance.
** Port - Enter the port number. Default value is 2321.
** Server Name - Enter the Siebel Enterprise server name.
** RSA Encryption - Choose if you want to use RSA encryption. Default value is false.
** Object Manager - Enter the value of the Object Manager of your Siebel instance.
** Language - Enter the language corresponding to the locale of the Siebel instance. Default value is ENU.
** Encoding - Enter an encoding type supported by the Siebel server. Default value is utf8.
+
.. The General filters are composed of:
+
** Default View Mode Bus Comp - Enter the default view for DataSense. The default value for this field is 3.
+
Supported values:
+
* 0 (SalesRepView):
+
** Applies access control according to a single position or a sales team.
** Displays records according to one of the following items: The user position or the sales team that includes a user's position. The Visibility field or Visibility MVField of the business component determines the visibility.
* 1 (ManagerView):
+
Displays records that a user and others who report to the user can access. For example, it includes the records that Siebel CRM displays in the My Team's Accounts visibility filter.
* 2 (PersonalView):
+
Displays records that a user can access, as determined by the Visibility Field property of the BusComp view mode object. For example, it includes the records that Siebel CRM displays in the My Accounts visibility filter.
* 3 (AllView):
+
Displays all records that includes a valid owner. For example, it includes the records that Siebel CRM displays in the All Accounts Across Organizations visibility filter.

** Data Sense Filter Query Bus Objects - Use this field to write a query to filter the Business Objects metadata being downloaded into the application.

** DataSense Filter Query Bus Comp - Use this field to write a query to filter the Business Components metadata being downloaded into the application.

** DataSense Filter Query Int Objects - Use this field to write a query to filter the Integration Objects metadata being downloaded into the application.

** Data Sense Filter Query - Use this field to write a query to filter the Business Services metadata being downloaded into the application.

** Other - Use this field to define another query to filter the Business Objects, Services or Integration Objects metadata which is going to be downloaded into the application.

[NOTE]
Limit the number of objects to retrieve through DataSense to a few objects using search specifications, otherwise retrieving metadata slows down Studio.

== Use Case: Studio

The Siebel Connector is an operation-based connector,
which means that when you add the connector to your flow you must specify an operation to perform.

=== Example Use Cases

The following are common use cases for the Siebel v4.0.0 connector:

. Create a Business Component (Action, Account, etc.)

.. Create a new Mule project in Anypoint Studio.
.. Add a suitable Mule Inbound endpoint, such as the HTTP listener, to begin the flow.
.. Drag the Create business component operation from the Siebel JDB palette onto the canvas, then select it to open the properties editor.
.. Configure the operation's parameters:
+
image::siebel/siebel-studio-create.png[Configure the operation's parameters]
+
.. Drag the Transform Message connector between the HTTP Listener and the Siebel connector on the flow.
.. Configure the input payload with the desired fields:
+
image::siebel/siebel-studio-transform-create.png[Configure the input payload]
+
. Execute a Business Service (Create Contact, Create Account etc.)
+
.. Create a new Mule project in Anypoint Studio.
.. Add a suitable Mule Inbound endpoint, such as the HTTP listener, to begin the flow.
.. Drag the Execute business service operation from the Siebel JDB palette onto the canvas, then select it to open the properties editor.
.. Configure the operation's parameters:
+
image::siebel/siebel-execute.png[Configure the operation parameters]
+
.. Drag the Transform Message connector between the HTTP Listener and the Siebel connector on the flow.
.. Configure the input payload with the desired fields:
+
image::siebel/siebel-transform-execute.png[Configure the input payload]
+
. Execute Siebel Adapter (Creating an Integration Object)
+
.. Create a new Mule project in Anypoint Studio.
.. Add a suitable Mule Inbound endpoint, such as the HTTP listener, to begin the flow.
.. Drag the Create business component operation from the Siebel JDB palette onto the canvas, then select it to open the properties editor.
.. Configure the operation's parameters:
+
image::siebel/siebel-integration.png[Configure the operation parameters]
+
.. Drag the Transform Message connector between the HTTP Listener and the Siebel connector on the flow.
.. Configure the input payload with the desired fields:
+
image::siebel/siebel-transform-integration.png[Configure the input payload]

== USE Case: XML

XML snippet from a project using the Siebel Connector:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:siebel="http://www.mulesoft.org/schema/mule/siebel"
      xmlns:http="http://www.mulesoft.org/schema/mule/http"
      xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/siebel http://www.mulesoft.org/schema/mule/siebel/current/mule-siebel.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">

    <configuration-properties file="mule-app.properties"/>

    <siebel:siebel-config name="Siebel_JDB_Siebel" doc:name="Siebel JDB Siebel" dataSenseFilterQueryBusComp="[Name] = 'Action'">
        <siebel:basic-connection user="${siebel.user}" password="${siebel.password}" server="${siebel.server}"
                                     serverName="${siebel.servername}" objectManager="${siebel.objectManager}"/>
    </siebel:siebel-config>

    <http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config">
        <http:listener-connection host="localhost" port="8081"/>
    </http:listener-config>

    <flow name="siebel-demosFlow1">
            <http:listener config-ref="HTTP_Listener_config" path="/create" doc:name="Listener"/>
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
                                        output application/java
                                        ---
                                        {
                                            "Type":payload.actionType as String,
                                            "Description": payload.description as String
                                        }]]>
                    </ee:set-payload>
                </ee:message>
            </ee:transform>
            <siebel:create-business-component config-ref="Siebel_JDB_Siebel" businessObjectComponentType="Action.Action"
                                              doc:name="Create business component"/>
            <ee:transform doc:name="Transform Message">
                <ee:message>
                    <ee:set-payload><![CDATA[%dw 2.0
                                        output application/json
                                        ---
                                        payload]]>
                    </ee:set-payload>
                </ee:message>
            </ee:transform>
        </flow>
</mule>
----

== No Logging of Log Requests and Responses [[logging-request-responses]]

To log requests and responses when using the connector, add this XML statement to the `Log4j` configuration file:

[source,xml,linenums]
----
<AsyncLogger
  name="org.mule.modules.siebel.internal.service"
  level="DEBUG"/>
<Root level="debug">
    <AppenderRef ref="Console" />
</Root>
----

After you have set the logging configuration you will see messages in the log like this :

----
org.mule.modules.siebel.internal.service.BusinessServiceServiceImpl:  executeBusinessService(String businessService, Map<String, Object> inputProperties) , businessService : Contact.CreateContact , inputProperties : {Contact IO={ListOfContact IO={Contact={First Name=Jhon, Last Name=Doe}}}}

org.mule.modules.siebel.internal.service.BusinessServiceServiceImpl: Service method arguments received:Input
Integration Object
Contact IO
1-1-44JGP
Contact IO
Output
String

1-1-44JGP
Contact Id
Output
String

1-1-44JGP
Error Message
Output
String

1-1-44JGP
Success Flag

DEBUG 2019-11-05 16:22:51,817 [[MuleRuntime].io.08: [siebel-demos-1511].siebel-demosFlow2.BLOCKING @582ca4a7] [event: 422373b1-fff9-11e9-a903-c4b301c70ed9] org.mule.modules.siebel.internal.service.BusinessServiceServiceImpl: Argument object structure:> Value =
> Type = SiebelMessage
> IntObjectFormat = Siebel Hierarchical
> MessageId = 1-FTU
> IntObjectName = Contact IO
> MessageType = Integration Object
- > Child property set #1 at level 1:
- > Value =
- > Type = ListOfContact IO
- - > Child property set #1 at level 2:
- - > Value =
- - > Type = Contact
- - > Years at Account =
- - > Manager Primary Organization Id =
- - > Opportunity Contact Comment =
- - > Primary Street Address =
- - > Primary Account Name =
- - > Primary Assignment Denorm Flag =
- - > Login Name =
- - > Suppress All Faxes =
- - > Email SR Updates Flag =
- - > Middle Name =
- - > PIM Current User Sync Flag =
- - > Race =
- - > Call =
- - > Created By Name =
- - > Joined Account Id =
- - > Preferred Communications =
- - > Row Id =
- - > Send Quarterly Financials =
- - > Degree of Influence =
- - > Org Status =
- - > Fax Phone # =
- - > Assignment Excluded =
- - > Primary Group/Household Id =
- - > Account Integration Id =
- - > Prospect Flag =
- - > Reference For Code =
- - > Start Date =
- - > First Name =
- - > Economic Buyer =
- - > S-S Instance =
- - > SR Red Flag =
- - > ChallengeAnswer =
- - > Manager Integration Id =
- - > SR Read Flag =
- - > Dedup Token =
- - > Approval Authority =
- - > Relation to Household =
- - > Primary Assignment Manual Flag =
- - > Date Entered Household =
- - > Role =
- - > Contacted =
- - > ESP Org Status =
- - > Rating =
- - > Primary PIM Sync Owner Id =
- - > Owned By Id =
- - > Primary Personal Payment Profile Id =
- - > Agenda =
- - > Responsibilities =
- - > Manager Middle Name =
- - > Evidence to support rating =
- - > User Status =
- - > Comment =
- - > ESP Political Analysis =
- - > Work Phone # =
- - > Social Security Number =
- - > Account Mod Id =
- - > Primary Country =
- - > Decision Orientation =
- - > Work Phone Extension =
- - > Assistant Phone # =
- - > Suppress All Emails =
- - > Time Zone =
- - > Assistant =
- - > Registration Source App Name =
- - > Business Results =
- - > Mail Stop =
- - > Project Role =
- - > Survey Language =
- - > Manager Id =
- - > Manager Last Name =
- - > ChallengeQuestion =
- - > Decision Criteria Business =
- - > Account Primary Ship To Address Id =
- - > Active Status =
- - > Suppress All Calls =
- - > Primary Personal Address Id =
- - > Reference Flag =
- - > Manager First Name =
- - > Alias =
- - > Date Exited Household =
- - > DeDup Key Modification Date =
- - > Coach =
- - > Account Survey Type =
- - > Education =
- - > X Mod Id =
- - > Cellular Phone # =
- - > Deduplication Match Score =
- - > Industry =
- - > Currency Code =
- - > Employee Number =
- - > Partnership Contact Flag =
- - > Survey Flag =
- - > Key last updated =
- - > Time Spent =
- - > Political Strategy =
- - > Job Title =
- - > Accomplishments =
- - > User Type =
- - > Person UId =
- - > Manager Primary Organization =
- - > Account Primary Ship To Person Id =
- - > Hobby =
- - > Income Currency Code =
- - > Primary Address County =
- - > Project Contact Comment =
- - > Income =
- - > Primary Assignment System Flag =
- - > Primary City =
- - > Partnership Key Contact Flag =
- - > Primary Alternate Email Id =
- - > Primary Service Agreement Id =
- - > Employee Login Name =
- - > Project Account Id =
- - > Primary State =
- - > Suppress All Mailings =
- - > Preferred Language Code =
- - > DeDup Last Match Date =
- - > Share Home Phone Flag =
- - > Manager UId =
- - > Primary Position Id =
- - > Last Name =
- - > Price List Id =
- - > Primary Responsibility Id =
- - > Personality =
- - > ESP Time Spent =
- - > Personal Win =
- - > Owned By =
- - > User Buyer =
- - > Political Analysis =
- - > Spouse =
- - > Price List Integration Id =
- - > Relationship Strategy =
- - > DUNS Number =
- - > Personal Contact =
- - > Employee Id =
- - > Primary Alternate Phone Id =
- - > ESP Role =
- - > S-S Key Id =
- - > ESP Decision Orientation =
- - > Primary Postal Code =
- - > Account Primary Bill To Address Id =
- - > End Date =
- - > Primary Category Id =
- - > Spouse Name =
- - > Primary Address Mod Id =
- - > Primary Organization Id =
- - > Educational Background =
- - > Send Newsletter =
- - > Party Name =
- - > Invoice Comments =
- - > Income Exchange Date =
- - > S-S Instance Id =
- - > Email Address =
- - > Primary Organization =
- - > Disable DataCleansing =
- - > M/M =
- - > Account Id =
- - > Primary Address Id =
- - > Last Clnse Date =
- - > Party Type Code =
- - > M/F =
- - > Deduplication Object Id =
- - > Mode =
- - > Primary Opportunity Id =
- - > Last Update - SDQ =
- - > Price List =
- - > Integration Id =
- - > Time Zone Id =
- - > Account Partner Flag =
- - > Alignment =
- - > Contact Organization Integration Id =
- - > Account Currency Code =
- - > Status =
- - > Primary Address Integration Id =
- - > Account Primary Bill To Person Id =
- - > Party UId =
- - > Hired By =
- - > Married =
- - > Dock Flag =
- - > Send Promotions =
- - > Approval Status =
- - > Last KeyGen Date =
- - > Birth Date =
- - > Previous Jobs =
- - > Primary Address Street Address3 =
- - > Primary Address Street Address2 =
- - > CSN =
- - > Time Zone Name =
- - > Primary Address Name =
- - > Parent Oppty Id =
- - > Decision Criteria Product =
- - > Invite To Seminars =
- - > Account Price List Id =
- - > Home Phone # =
- - > Employee Flag =
- - > Technical Buyer =
- - - > Child property set #1 at level 3:
- - - > Value =
- - - > Type = ListOfContact_Business Address
- - - - > Child property set #1 at level 4:
- - - - > Value =
- - - - > Type = Contact_Business Address
- - - - > State =
- - - - > Postal Code =
- - - - > Address Name =
- - - - > Street Address 2 =
- - - - > City =
- - - - > Country =
- - - - > Street Address =

DEBUG 2019-11-05 16:22:51,817 [[MuleRuntime].io.08: [siebel-demos-1511].siebel-demosFlow2.BLOCKING @582ca4a7] [event: 422373b1-fff9-11e9-a903-c4b301c70ed9] org.mule.modules.siebel.internal.service.BusinessServiceServiceImpl: > Value =
> Type =
- > Child property set #1 at level 1:
- > Value =
- > Type = Contact IO
- > IntObjectFormat = Siebel Hierarchical
- > MessageId = 1-FTU
- > IntObjectName = Contact IO
- > MessageType = Integration Object
- - > Child property set #1 at level 2:
- - > Value =
- - > Type = ListOfContact IO
- - - > Child property set #1 at level 3:
- - - > Value =
- - - > Type = Contact
- - - > First Name = Jhon
- - - > Last Name = Doe

DEBUG 2019-11-05 16:22:53,216 [[MuleRuntime].io.08: [siebel-demos-1511].siebel-demosFlow2.BLOCKING @582ca4a7] [event: 422373b1-fff9-11e9-a903-c4b301c70ed9] org.mule.modules.siebel.internal.service.BusinessServiceServiceImpl:  executeBusinessService(String businessService, Map<String, Object> inputProperties) output : > Value =
> Type =
> Contact Id = 1-O1MP
----

== See Also

* https://forums.mulesoft.com[MuleSoft Forum]
* https://support.mulesoft.com[Contact MuleSoft Support]