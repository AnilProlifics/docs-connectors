= Zuora - Upgrade and Migrate - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

Upgrade Anypoint Connector for Zuora (Zuora Connector) to version 5.0.  

== Supported Upgrade Paths

[%header,cols="50a,50a"]
|===
|From Version | To Version
|4.2.x |5.0.0
|===

== Changes in This Release

The main changes introduced in Zuora Connector 5.0.0 are:

* Four operations were removed from the connector and were added separately in the new Anypoint Connector for AQuA (AQuA Connector). +
The removed operations are:
** Aqua-get-job-results
** Aqua-get-last-job-completed
** Aqua-post-query-or-export-deleted-data
** Aqua-delete-a-running-job
* The schema and namespace are the same, but there are some changes in the Anypoint Studio display names.

=== CRUD Operations

All of the CRUD operations were changed so that CRUD is prepended to operation names, for example: 

|===
|4.2.x|5.0.0

|Create import crud operation
|CRUD: Create Import operation

|Delete bill run crud
|CRUD: Delete bill run

|Get account crud
|CRUD: Get account

|Update product crud
|CRUD: Update Product
|===

=== Changes to Operations Names

Some of the operations' names are updated:

|===
|4.2.x|5.0.0

|Create revenue schedule for invoice item adjustment distribute by date range
|Create revenue schedule for invoice item adjustment (distribute by date range)

|Remove an event trigger
|DELETE Event Trigger

|Delete usage crud
|Delete usage record
|===

=== Changes in Fields and Values

There are some changes in fields and their corresponding values:

* The credit memo items operation and the taxation items created in the `write-off` operation are now applied to the corresponding invoice items and invoice taxation items respectively.
* The values of the following fields are also changed to the taxation items of credit memo items operation:
  ** taxRate +
  The value of this field is now set to `0`.
  ** exemptAmount +
  The value of this field is now set to `0`.
  ** taxRateType + 
  The value of this field is now set to `null`.


== Limitations

AQuA operations are removed from Zuora Connector. To use AQuA operations, install Zuora AQuA Connector.  

After you upgrade to Zuora Connector 5.0.0, the following operations are no longer available in Zuora Connector and must be replaced with the corresponding Zuora AQuA Connector operations:

|===
|AQuA operations in Zuora 4.2.x |Zuora AQuA 1.0.0 operations

|Aqua get job results
|get job results

|Aqua get-last-job-completed
|get-last-job-completed

|Aqua post-query-or-export-deleted-data
|post-query-or-export-deleted-data

|Aqua delete-a-running-job
|delete-a-running-job
|===


== Upgrade Prerequisites

Before you perform the upgrade, you must:

. Create a backup of your files, data, configuration in case you need to restore to the previous version. 
. Install Zuora AQuA Connector to replace the AQuA operations that were previously included in Zuora Connector 4.2.x:
.. In Studio, create a Mule project.
.. In the Mule Palette, click *Search in Exchange*.
.. In Add Modules to Project, type 'Zuora AQuA' in the search field.
.. In Available modules, select *Zuora AQuA Connector*, and then click *Add*.
.. Click *Finish*.	
.. Verify that the `zuora-aqua-connector` dependency version is `1.0.0` in the pom.xml. +
Anypoint Studio upgrades the connector automatically.

== Upgrade Steps

Follow these steps to perform the upgrade to Zuora Connector 5.0.0:

.. In Studio, create a Mule project.
.. In the Mule Palette, click *Search in Exchange*.
.. In Add Modules to Project, type 'Zuora AQuA' in the search field.
.. In Available modules, select *Zuora AQuA Connector*, and then click *Add*.
.. Click *Finish*.
.. Verify that the `zuora-connector` dependency version is `5.0.0` in the pom.xml. 

Anypoint Studio upgrades the connector automatically. 


== Verify the Upgrade

After you install the latest version of the connector, follow these steps to verify the upgrade:

. In Anypoint Studio, verify there are no errors in the *Problems* or *Console* views.
. Check the project pom.xml and verify there are no problems.
. Test the connection and verify the operations work.  

== Troubleshooting

If there are problems with caching the parameters and caching the metadata, try restarting Anypoint Studio.  

=== Reverting the Upgrade

If it is necessary to revert back to the previous version of Zuora Connector, change the `zuora-connector` dependency version `5.0.0` in the project's pom.xml to the previous version.  

You must update the project's pom.xml in Anypoint Studio. 


== See Also

https://help.mulesoft.com[MuleSoft Help Center]
