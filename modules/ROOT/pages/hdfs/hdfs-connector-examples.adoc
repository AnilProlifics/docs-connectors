= Hadoop (HDFS) - Examples - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

== Create a Text File in HDFS

The following example shows how to create a text file in HDFS using the connector:

. In Anypoint Studio, click *File > *New > Mule Project*, name the project, and click *Finish*.
. In the *Mule Palette* search field, type `http`.
. Drag the *HTTP > Listener* operation to the canvas.
. In *General* settings, click the green plus sign on the right of *Connector Configuration*.
. In the next screen, click *OK* to accept the default settings. 
. In *Path*, enter `/createFile`.
. In the *Mule Palette* search field, type `hdfs`. 
. Drag the HDFS *Write* operation to the canvas.
. Set the *Path* to `/test.txt` and leave the default values for the other options. +
This is the path of the file that HDFS will create. 
. Right-click in the project's canvas and select *Run project* to start the application.
. From an HTTP client such as Postman or curl, make a POST request and set the value for `Content-type:plain/text` to `+localhost:8081/createFile+` with the content you want to write as a payload.  +
For example: + 
`curl -X POST -H "Content-Type:plain/text" -d "payload to write to file" localhost:8090/createFile`
. Use Hadoop explorer to verify that the `/test.txt` file has been created and has your content.

== Configure the Connector for Windows

This example shows how to set up Hadoop (HDFS) Connector for Windows using Anypoint Studio.

. Download the Hadoop files and paste them into a local folder.
. Set the following Windows environment variables:
* `HADOOP_HOME: C:\Users\user\hadoop\winutils-master\hadoop-2.7.1`
* `KRB5_CONFIG: C:\Users\user\hadoop`
* `KRB5CCNAME: C:\Users\user\hadoop\tmp\krb5cache`
. In the MuleSoft application, configure the Set Variable component: 
.. In the *Mule Palette* search field, type `Set Variable`. 
.. Drag the *Set Variable* component onto the canvas. 
.. Set the `KRB5.conf` location in the flow variable, as follows: +
`${mule.home}${file.separator}apps${file.separator}${app.name}${file.separator}classes${file.separator}krb5.conf`
+
.Enter the values for the Set Variable component.
image::hdfs/hdfs-set-variable.png[Screenshot of the fields for the Set Variable component]
+
<1> Enter a name for the variable in this field.
<2> Enter the location for the Kerberos configuration in this field. 
. In the MuleSoft application, configure the Expression component:
.. In the *Mule Palette* search field, type `Expression`. 
.. Drag the connector expression-component on the canvas.  
.. Enter the value for the Expression: +
`System.setProperty("java.security.krb5.conf",flowVars.krb5Loc);`
. In the *Mule Palette* search field, type `Set Variable`. 
.. Drag the *Set Variable* component onto the canvas.
.. Enter the value of the TrustStore Location as follows: + 
`${mule.home}${file.separator}apps${file.separator}${app.name}${file.separator}classes${file.separator}hdfs.ts`
.. In the *Mule Palette* search field, type `Expression`. 
.. Drag the connector expression-component on the canvas.  
.. Enter the value for the truststore as follows: +
`System.setProperty("javax.net.ssl.trustStore",flowVars.HDFS_TrustStore);`
.. In the *Mule Palette* search field, type `Expression`. 
.. Drag the connector expression-component on the canvas.  
.. Enter the value for the truststore password as follows: +
`System.setProperty("javax.net.ssl.trustStorePassword","yourpassword");`


== See Also

https://help.mulesoft.com[MuleSoft Help Center]
