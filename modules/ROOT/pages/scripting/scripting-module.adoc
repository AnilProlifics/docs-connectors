= Scripting Module
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: Scripting, custom code, groovy, ruby, phyton, javascript

In spite of the rich selection of elements available in Mule, you may find yourself in need of creating custom code to carry out all or part of a complex task, or in case you want to reuse some modules that you have already writen. The scripting module can execute custom logic written in a scripting language. Supported scripting languages:

* Groovy
* Python
* Javascript
* Ruby

== Instalation

The scripting module is already included in Anypoint Studio. In case you want to add the component into one of your flows, just search for it in the Mule Palette.

image::scripting/scripting-flow.png[Scripting Execute component]

== Basic Usage

To configure the Script component, double-click the Script Execute element to open the **Mule Properties Editor**. Use the **General** tab to specify your code on the script text window.

Choose the Engine for the execute component:

* Groovy
* Nashorn (JavaScript)
* Jython (Python)
* JRuby (Ruby)

You should enter the scripting code. In case you want to load the code from an external file, you can set this by using a xref:4.1@mule-runtime::configuring-properties.adoc[File Configuration Property].

image::scripting/code-config.png[Script with code]

In the XML editor, this will be seen as:

.Example: Basic usage
[source,xml,linenums]
----
<scripting:execute engine="jython" doc:name="Script">
	<scripting:code >def factorial(n):
	if n == 0: return 1
	return n * factorial(n-1)
result = factorial(10)
</scripting:code>
----

Using a xref:4.1@mule-runtime::configuring-properties.adoc[File Configuration Properties]:

image::scripting/file-config.png[Script with file configuration property]

In the XML editor, this will be seen as:

.Example: Using a File configuration property to set script's code
[source,xml,linenums]
----
<scripting:execute engine="jython" doc:name="Script">
	<scripting:code >${file::script.py}</scripting:code>
</scripting:execute>
----

=== Setting Parameters

In addition, you can define input parameter values for the script to use using DataWeave. For example:

image::scripting/parameters.png[Script using parameters]

In the XML editor, this will be seen as:

.Example: Setting Parameters
[source,xml,linenums]
----
<scripting:execute engine="jython" doc:name="Script">
	<scripting:code >def factorial(n):
	if n == 0: return 1
	return n * factorial(n-1)
result = factorial(initialValue + int(payload))</scripting:code>
	<scripting:parameters ><![CDATA[#[{initialValue: 10}]]]></scripting:parameters>
</scripting:execute>
----

== Advance Configuration

You can use the **Advanced** tab to set if you want to modify the target value, and if you want to set a variable as the target of the scripting execution. 

image::scripting/advanced.png[Advanced settings]

In the XML editor, this will be seen as:

.Example: Advanced Settings
[source,xml,linenums]
----
<scripting:execute engine="jython" doc:name="Script" target="variableName">
	<scripting:code >${file::script.py}</scripting:code>
</scripting:execute
----

== See Also

* xref:scripting/scripting-reference.adoc[Scripting Module Documentation Reference]
