= Workday Examples - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

:page-aliases: workday-to-add-fund-to-service.adoc, workday-to-create-position.adoc

There are two examples you can try for Workday:

* Add a Fund to the Financial Management Service
* Create a Position Request in Workday

== Example: Add a Fund to the Financial Management Service

This example uses the *Invoke* operation in the Workday connector to insert a fund in the Financial Management service.

. Create a Mule application as a Design Center.
+
. Add and configure a trigger, such as the HTTP Listener or Scheduler, for a flow in your app.
+
You can accept the default settings for the HTTP Listener or Scheduler and provide any required values.
+
//image::workday/http-listener-add-fund-example.png[Http listener config for add fund request]
+
. Add a Transform component to your flow, and use the field within the Script tab to add a DataWeave transformation script.
+
Example:
+
[source,dataweave,linenums]
----
%dw 2.0
output application/xml
ns ns0 urn:com.workday/bsvc
---
{
  ns0#Put_Fund_Request @(ns0#Add_Only: true, ns0#version: "v32.1"): {
    ns0#Fund_Data: {
      ns0#Fund_Name: "I.M.F",
      ns0#Fund_Type_Reference: {
        ns0#ID @(ns0#'type': 'Fund_Type_ID'): "FUND_TYPE-6-3"
      }
    }
  }
}
----
+
//image::workday/tranform-dataweave-add-fund-example.png[Transform dataweave for add fund request]
+
. Add the Workday connector. Select the web service *Financial Management*, then configure, test, and save a connection.
+
//image::workday/workday-configuration-design-center.png[Workday config]
+
Configuration example:
+
* Configuration Name: `My Workday Connection`
* Connection: `Basic Authentication Api V32`
* Username: `my_workday_username`
* Password: `my_workday_password`
* Tenant Name: `my_workday_tenant_name`
* Host Name: Defaults to `impl-cc.workday.com`
+
. Choose operation *Put_Fund*.
+
//image::workday/workday-operation-with-content.png[put fund operation]
+
. Add a Logger to the end of your flow that takes a `payload` (or `#[payload]`) as the message.
. Deploy or run your app.
. Once the status is `Running`, check for the response.
+
If you are using the HTTP Listener, you can go to your listener URL, for example: `+http://<app_url>:8081/fund+`.
+
If you are using the Scheduler, you can find the response in the logs.
+
You should receive an XML response similar to this snippet:
+
[source,xml,linenums]
----
<wd:Put_Fund_Response xmlns:wd="urn:com.workday/bsvc" wd:version="v32.1">
    <wd:Fund_Reference wd:Descriptor="I.M.F">
        <wd:ID wd:type="WID">THE_WID_ID_NUMBER</wd:ID>
        <wd:ID wd:type="Fund_ID">FUND-6-399</wd:ID>
    </wd:Fund_Reference>
</wd:Put_Fund_Response>
----

== Example: Create a Position Request in Workday

This example creates Mule flow that makes a Workday position request.

. Create a Mule application as a Design Center.
. Add and configure an HTTP Listener as a trigger for your flow, and set a `Path` such as:
+
`/create_position`
+
You can use the default configuration for the Listener connection.
+
//image::workday/http-listener-position-request-example.png[]
+
. Add the Transform Dataweave component to your flow.
. Provide a transformation script for the connector.
+
[source,dataweave,linenums]
----
%dw 2.0

ns ns0 urn:com.workday/bsvc


output application/xml
---
{
  ns0#Create_Position_Request: {
    ns0#Business_Process_Parameters: {
      ns0#Auto_Complete: true,
      ns0#Run_Now: true
    },
    ns0#Create_Position_Data: {
      ns0#Supervisory_Organization_Reference: {
        ns0#ID @("ns0:type": "Organization_Reference_ID"): "SUPERVISORY_ORGANIZATION-6-226"
      },
      ns0#Position_Data: {
        ns0#Job_Posting_Title: "General Manager"
      },
      ns0#Position_Group_Restrictions_Data: {
        ns0#Availability_Date: "2017-07-06",
        ns0#Earliest_Hire_Date: "2017-07-08"
      },
      ns0#Edit_Assign_Organization_Sub_Process: {
        ns0#Business_Sub_Process_Parameters: {
          ns0#Skip: true
        }
      },
      ns0#Request_Default_Compensation_Sub_Process: {
        ns0#Business_Sub_Process_Parameters: {
          ns0#Skip: true
        }
      },
      ns0#Assign_Pay_Group_Sub_Process: {
        ns0#Business_Sub_Process_Parameters: {
          ns0#Skip: true
        }
      },
      ns0#Assign_Costing_Allocation_Sub_Process: {
        ns0#Business_Sub_Process_Parameters: {
          ns0#Skip: true
        }
      }
    }
  }
}
----
+
//image::workday/transform-dataweave-position-request-example.png[]
+
. Select the connector.
+
//image::workday/select-connector-design-center.png[]
+
. Select the web service and the operation with content. In this example the content is the payload.
+
Ensure that the values are available as menu items in the *Service* and *Operation* fields. The names become available once the connector loads the metadata for them.
Do not type the names manually.
+
//image::workday/select-operation-design-center.png[]
+
//image::workday/workday-configuration-position-request-example.png[]
+
. Set up, test, and save a Workday configuration for the connection to the Workday server, for example:
+
* Configuration Name: `My Workday Config`
* Connection: `Basic Authentication Api V32`
* Username: `my_user_name`
* Password: `my_password`
* Tenant Name: `my_tenant_name`
* Host Name: `impl-cc.workday.com`
+
If the connection test is unsuccessful, correct any invalid connection parameters and retest the connection.
+
//image::workday/workday-configuration-design-center.png[]
+
. Add a Logger to the end of your flow that accepts `payload` as the message.
+
//image::workday/logger-position-request-example.png[]
+
. Deploy, sync, or run the app.
. To test the app, open `+http://url.for.your.app:8081/create_position+` from a browser or from an app such as Postman.
+
The response should look something like this:
+
[source,xml,linenums]
----
<wd:Create_Position_Response xmlns:wd="urn:com.workday/bsvc" wd:version="v32.1">
  <wd:Event_Reference>
  <wd:ID wd:type="WID">9cab4242420ddba1142ba11ad0c0d0g7</wd:ID>
  </wd:Event_Reference>
  <wd:Position_Reference>
    <wd:ID wd:type="WID">9cab4242420ddba1142ba11ad0c0d0g7</wd:ID>
    <wd:ID wd:type="Position_ID">P-11158</wd:ID>
  </wd:Position_Reference>
</wd:Create_Position_Response>
----
+
The Logger displays this message:
+
----
{Create_Position_Response={Event_Reference={ID=9cab4242420ddba1142ba11ad0c0d0g7}, Position_Reference={ID=P-11158}}}
----


== See Also

* https://forums.mulesoft.com[MuleSoft Forum]
