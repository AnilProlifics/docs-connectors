= Sockets Connector Reference - Mule 4
:page-aliases: connectors::sockets/sockets-documentation.adoc

Support Category: https://www.mulesoft.com/legal/versioning-back-support-policy#anypoint-connectors[Select]

Sockets Connector v1.2

Anypoint Connector for Sockets (Sockets Connector) provides a sockets listener, send capability, and send and receive functionality. Provides TCP and UDP requesters.

Release Notes: xref:release-notes::connector/connector-sockets.adoc[Sockets Connector Release Notes]

== Configurations
---
[[listener-config]]
=== Listener Config


Implementation of AbstractSocketConfig for listener sockets.


==== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| * <<listener-config_tcp-listener, TCP Listener>>
* <<listener-config_udp-listener, UDP Listener>>
 | The connection types to provide to this configuration. | | x
| Default Encoding a| String |  Default encoding used in the
SocketOperations#send(RequesterConnection, RequesterConfig, Object, String, String, Message) for serializing String. Aditionally, used by the SocketWorker for encoding replies sent by the SocketListener source. |  |
|===

==== Connection Types

[[listener-config_tcp-listener]]
===== TCP Listener


A ConnectionProvider which provides instances of TcpListenerConnection to use by SocketListener.


====== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Protocol a| One of:

* <<SafeProtocol>>
* <<DirectProtocol>>
* <<LengthProtocol>>
* <<StreamingProtocol>>
* <<XmlMessageProtocol>>
* <<xml-message-eof-protocol>>
* <<CustomProtocol>>
* <<eof-protocol>>
* <<CustomClassLoadingLengthProtocol>> |  TcpProtocol that knows how the data is read and written. If not specified, the SafeProtocol is used. |  |
| TLS Configuration a| <<Tls>> |  Implies the use of SSLServerSocket instead of plain TCP ServerSocket for accepting new SSL connections. |  |
| Port a| Number |  Connection's port number |  | x
| Host a| String |  Connection's host name |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors |  |
| Disable Validation a| Boolean |  Disables connection validation |  |
| Send Buffer Size a| Number |  The size of the buffer (in bytes) used when sending data, set on the socket itself. |  |
| Receive Buffer Size a| Number |  The size of the buffer (in bytes) used when receiving data, set on the socket itself. |  |
| Client Timeout a| Number |  Sets the SO_TIMEOUT value on sockets, and indicates the amount of time (in milliseconds) that the socket waits in a blocking operation before failing. A value of 0 (default) indicates waiting indefinitely. |  |
| Reuse Address a| Boolean |  Sets SO_REUSEADDRESS (default) value on the sockets before binding, which helps reduce "address already in use" errors when a socket is reused. |  true |
| Send TCP With No Delay a| Boolean |  If set, it does not collect transmitted data together for greater efficiency but sends it immediately. Defaults to true even though socket default is false, because optimizing to reduce amount of network traffic
over latency is hardly ever a concern today. |  true |
| Linger a| Number |  Sets SO_LINGER value, and indicates how long (in milliseconds) the socket takes to close, so any remaining data transmits correctly. |  |
| Keep Alive a| Boolean |  Enables SO_KEEPALIVE behavior on open sockets. This automatically checks open socket connections but unused for long periods and closes them if the connection becomes unavailable. This is a property on the socket itself and a server socket uses it to control whether connections to the server keep alive before they recycle. |  false |
| Fail On Unresolved Host a| Boolean |  Whether the socket fails during its creation if the host set on the endpoint cannot be resolved. However, set it to false to allow unresolved hosts, which is useful when connecting through a proxy. |  true |
| Server Timeout a| Number | Sets SO_TIMEOUT value when you use the socket as a server. The timeout that applies to the "accept" operation. If no connection arrives, a value of 0 (default) causes the accept to wait indefinitely. |  |
| Receive Backlog a| Number |  The maximum queue length for incoming connections. |  50 |
|===

[[listener-config_udp-listener]]
===== UDP Listener

A ConnectionProvider which provides instances of UdpListenerConnection to use by SocketListener.


====== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Port a| Number |  Connection's port number |  | x
| Host a| String |  Connection's host name |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors |  |
| Disable Validation a| Boolean |  Disables connection validation |  |
| Send Buffer Size a| Number |  The size of the buffer (in bytes) used when sending data, set on the socket itself. |  |
| Receive Buffer Size a| Number |  The size of the buffer (in bytes) used when receiving data, set on the socket itself. |  |
| Client Timeout a| Number |  Sets the SO_TIMEOUT value on sockets, and indicates the amount of time (in milliseconds) that the socket waits in a blocking operation before failing. A value of 0 (default) indicates waiting indefinitely. |  |
| Reuse Address a| Boolean |  Sets SO_REUSEADDRESS (default) value on the sockets before binding, which helps reduce "address already in use" errors when a socket is reused. |  true |
| Broadcast a| Boolean |  Enable or disable SO_BROADCAST value into the DatagramSocket |  false |
|===


==== Associated Sources

* <<SocketListener>>

---
[[request-config]]
=== Request Config


Implementation of AbstractSocketConfig for requester sockets.


==== Parameters
[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | x
| Connection a| * <<request-config_tcp-requester, TCP Requester>>
* <<request-config_udp-requester, UDP Requester>>
 | The connection types to provide to this configuration. | | x
| Default Encoding a| String |  Default encoding used in the
SocketOperations#send(RequesterConnection, RequesterConfig, Object, String, String, Message) for serializing String. Aditionally, used by the SocketWorker for encoding replies sent by the SocketListener source. |  |
|===

==== Connection Types

[[request-config_tcp-requester]]
===== TCP Requester


A ConnectionProvider which provides instances of TcpRequesterConnection to use by the SocketOperations.


====== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Local Address Settings a| <<SocketConnectionSettings>> |  This configuration parameter refers to the address where the Socket should bind to. |  |
| Protocol a| One of:

* <<SafeProtocol>>
* <<DirectProtocol>>
* <<LengthProtocol>>
* <<StreamingProtocol>>
* <<XmlMessageProtocol>>
* <<xml-message-eof-protocol>>
* <<CustomProtocol>>
* <<eof-protocol>>
* <<CustomClassLoadingLengthProtocol>> |  TcpProtocol that knows how the data is read and written. If not specified, the SafeProtocol is used. |  |
| TLS Configuration a| <<TLS>> |  Implies the use of SSLServerSocket instead of plain TCP ServerSocket for accepting new SSL connections. |  |
| Port a| Number |  Connection's port number |  | x
| Host a| String |  Connection's host name |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors |  |
| Disable Validation a| Boolean |  Disables connection validation |  |
| Pooling Profile a| <<PoolingProfile>> |  Characteristics of the connection pool |  |
| Send Buffer Size a| Number |  The size of the buffer (in bytes) used when sending data, set on the socket itself. |  |
| Receive Buffer Size a| Number |  The size of the buffer (in bytes) used when receiving data, set on the socket itself. |  |
| Client Timeout a| Number |  Sets the SO_TIMEOUT value on sockets, and indicates the amount of time (in milliseconds) that the socket waits in a blocking operation before failing. A value of 0 (default) indicates waiting indefinitely. |  |
| Reuse Address a| Boolean |  Sets SO_REUSEADDRESS (default) value on the sockets before binding, which helps reduce "address already in use" errors when a socket is reused. |  true |
| Send TCP With No Delay a| Boolean |  If set, it does not collect transmitted data together for greater efficiency but sends it immediately. Defaults to true even though socket default is false, because optimizing to reduce amount of network traffic
over latency is hardly ever a concern today. |  true |
| Linger a| Number |  Sets SO_LINGER value, and indicates how long (in milliseconds) the socket takes to close, so any remaining data transmits correctly. |  |
| Keep Alive a| Boolean |  Enables SO_KEEPALIVE behavior on open sockets. This automatically checks open socket connections but unused for long periods and closes them if the connection becomes unavailable. This is a property on the socket itself and a server socket uses it to control whether connections to the server keep alive before they recycle. |  false |
| Fail On Unresolved Host a| Boolean |  Whether the socket fails during its creation and if the host set on the endpoint cannot be resolved. However, set it to false to allow unresolved hosts, which is useful when connecting through a proxy. |  true |
| Connection Timeout a| Number |  Number of milliseconds to wait until an outbound connection to a remote server is successfully created. Defaults to 30 seconds. |  30000 |
|===

[[request-config_udp-requester]]
===== UDP Requester


A ConnectionProvider which provides instances of UdpRequesterConnection to use by the SocketOperations.


====== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Local Address Settings a| <<SocketConnectionSettings>> |  This configuration parameter refers to the address where the DatagramSocket should bind to. |  |
| Port a| Number |  Connection's port number |  | x
| Host a| String |  Connection's host name |  | x
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors |  |
| Disable Validation a| Boolean |  Disables connection validation |  |
| Pooling Profile a| <<PoolingProfile>> |  Characteristics of the connection pool |  |
| Send Buffer Size a| Number |  The size of the buffer (in bytes) used when sending data, set on the socket itself. |  |
| Receive Buffer Size a| Number |  The size of the buffer (in bytes) used when receiving data, set on the socket itself. |  |
| Client Timeout a| Number |  Sets the SO_TIMEOUT value on sockets, and indicates the amount of time (in milliseconds) that the socket waits in a blocking operation before failing. A value of 0 (default) indicates waiting indefinitely. |  |
| Reuse Address a| Boolean |  Sets SO_REUSEADDRESS (default) value on the sockets before binding, which helps reduce "address already in use" errors when a socket is reused. |  true |
| Broadcast a| Boolean |  Enable or disable SO_BROADCAST value into the DatagramSocket |  false |
|===

== Supported Operations

* <<send>>
* <<sendAndReceive>>

== Operations

[[send]]
=== Send

`+<http://www.mulesoft.org/schema/mule/sockets:send>+`


Sends the data using the client associated to the RequesterConnection.


==== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Content a| Any |  Data serialized and sent through the socket. |  #[payload] |
| Output Encoding a| String |  Encoding to use to serialize the data if its type is String. |  |
|===


==== For Configurations

* <<request-config>>

==== Throws

* SOCKETS:RETRY_EXHAUSTED
* SOCKETS:CONNECTIVITY


[[sendAndReceive]]
=== Send And Receive

`+<http://www.mulesoft.org/schema/mule/sockets:send-and-receive>+`


Sends the data using the client associated to the RequesterConnection, and
then blocks until a response is received or the timeout is met, in which case the
operation returns a null payload.


==== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Content a| Any |  Data serialized and sent through the socket. |  #[payload] |
| Output Encoding a| String |  Encoding to use to serialize the data if its type is String. |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams. |  |
| Target Variable a| String |  The name of a variable to store the operation's output. |  |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| SocketAttributes
|===

==== For Configurations

* <<request-config>>

==== Throws

* SOCKETS:RETRY_EXHAUSTED
* SOCKETS:CONNECTIVITY


== Sources

[[SocketListener]]
=== Socket Listener

`+<http://www.mulesoft.org/schema/mule/sockets:socket-listener>+`

==== Parameters

[%header,cols="20s,20a,35a,20a,5a"]
|===
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | x
| Redelivery Policy a| <<RedeliveryPolicy>> |  Defines a policy for processing the redelivery of the same message |  |
| Streaming Strategy a| * <<repeatable-in-memory-stream>>
* <<repeatable-file-store-stream>>
* non-repeatable-stream |  Configure to use repeatable streams.. |  |
| Reconnection Strategy a| * <<reconnect>>
* <<reconnect-forever>> |  A retry strategy in case of connectivity errors |  |
| Response Value a| Any |  |  #[mel:payload] |
|===

==== Output

[%autowidth.spread]
|===
|Type |Binary
| Attributes Type a| SocketAttributes
|===

==== For Configurations

* <<listener-config>>

==== Throws

* MULE:SOURCE_RESPONSE_SEND
* MULE:SOURCE_ERROR_RESPONSE_SEND
* MULE:SOURCE_ERROR_RESPONSE_GENERATE
* MULE:SOURCE_RESPONSE_GENERATE


== Types
[[Tls]]
=== TLS

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Enabled Protocols a| String |
| Enabled Cipher Suites a| String |
| Trust Store a| <<TrustStore>> |
| Key Store a| <<KeyStore>> |
|===

[[TrustStore]]
=== Trust Store

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Path a| String |
| Password a| String |
| Type a| * Enumeration, one of:

** jks
** jceks
** pkcs12
* String |
| Algorithm a| String |
| Insecure a| Boolean |
|===

[[KeyStore]]
=== Key Store

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Path a| String |
| Type a| * Enumeration, one of:

** jks
** jceks
** pkcs12
* String |
| Alias a| String |
| Key Password a| String |
| Password a| String |
| Algorithm a| String |
|===

[[reconnect]]
=== Reconnect

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| Count a| Number | How many reconnection attempts to make. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, nonblocking thread. |true |
|===

[[reconnect-forever]]
=== Reconnect Forever

[%header%autowidth.spread]
|===
| Field | Type | Description | Default Value | Required
| Frequency a| Number | How often in milliseconds to reconnect. | |
| blocking |Boolean |If false, the reconnection strategy runs in a separate, nonblocking thread. |true |
|===

[[RedeliveryPolicy]]
=== Redelivery Policy

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Max Redelivery Count a| Number |
| Use Secure Hash a| Boolean |
| Message Digest Algorithm a| String |
| Id Expression a| String |
| Object Store Ref a| String |
|===

[[repeatable-in-memory-stream]]
=== Repeatable In Memory Stream

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Initial Buffer Size a| Number |
| Buffer Size Increment a| Number |
| Max Buffer Size a| Number |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB |
|===

[[repeatable-file-store-stream]]
=== Repeatable File Store Stream

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Max In Memory Size a| Number |
| Buffer Unit a| Enumeration, one of:

** BYTE
** KB
** MB
** GB |
|===

[[SocketConnectionSettings]]
=== Socket Connection Settings

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Port a| Number |
| Host a| String |
|===

[[PoolingProfile]]
=== Pooling Profile

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Max Active a| Number |
| Max Idle a| Number |
| Max Wait a| Number |
| Min Eviction Millis a| Number |
| Eviction Check Interval Millis a| Number |
| Exhausted Action a| Enumeration, one of:

** WHEN_EXHAUSTED_GROW
** WHEN_EXHAUSTED_WAIT
** WHEN_EXHAUSTED_FAIL |
| Initialisation Policy a| Enumeration, one of:

** INITIALISE_NONE
** INITIALISE_ONE
** INITIALISE_ALL |
| Disabled a| Boolean |
|===

[[SafeProtocol]]
=== Safe Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Max Message Leght a| Number | -1
| Rethrow Exception On Read a| Boolean | false
|===

[[DirectProtocol]]
=== Direct Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Rethrow Exception On Read a| Boolean | false
|===

[[LengthProtocol]]
=== Length Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Max Message Length a| Number | -1
| Rethrow Exception On Read a| Boolean | false
|===

[[StreamingProtocol]]
=== Streaming Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Rethrow Exception On Read a| Boolean | false
|===

[[XmlMessageProtocol]]
=== XML Message Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Rethrow Exception On Read a| Boolean | false
|===

[[xml-message-eof-protocol]]
=== XML Message Eof Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Rethrow Exception On Read a| Boolean | false
|===

[[CustomProtocol]]
=== Custom Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Class a| String |
|===

[[eof-protocol]]
=== EOF Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Rethrow Exception On Read a| Boolean | false
|===

[[CustomClassLoadingLengthProtocol]]
=== Custom Class Loading Length Protocol

[cols=".^30%,.^40%,.^30%", options="header"]
|===
| Field | Type | Default Value
| Class Loader a| Any |
| Max Message Length a| Number | -1
| Rethrow Exception On Read a| Boolean | false
|===

== See Also

https://help.mulesoft.com[MuleSoft Help Center]
