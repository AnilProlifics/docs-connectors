////
Set connector-specific values for the following variables:

* {exchange-search-name} - Lower case term used to find the connector in Exchange. For example, redis.
* {connector-name} - Name of the connector without the word "Connector." For example, Redis.
* {version} - Connector version. For example, 1.0.
* {lc-connector-name} - Lower case connector name to use in the links in the Next Steps and See Also sections. For example, redis.
* {studio-connector-name} - Name of the connector as it appears in the Available modules section in the Studio Add Dependencies to Project window. For example, NetSuite Connector - Mule 4.
////

:exchange-search-name: <value>
:connector-name: <value>
:version: <value>
:lc-connector-name: <value>
:studio-connector-name: <value>

// Comment out the next line if the connector does not use TLS.
:tls:

// Remove comments from the next line if the connector has an Additional Configuration topic
//:additional-config:

= Using Anypoint Code Builder to Configure Database Connector 1.14 - Mule 4
//Use beta banner until June release
include::reuse::partial$beta-banner.adoc[tag="anypoint-code-builder"]

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-connector-config-intro"]

== Create a New Integration Project

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-create-integration-project"]

== Add the Connector to Your Integration Project

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-add-connector-to-project"]

== Configure the Source For the Flow

A source initiates a flow when a specified condition is met.
You can configure one of these input sources to use with Database Connector:

* *Database > On Table Row* +
Initiates a flow by selecting from a table at a regular interval and generates one message per obtained row
* *HTTP > Listener* +
Initiates a flow each time it receives a request on the configured host and port
* *Scheduler* +
Initiates a flow when a time-based condition is met.
+
include::anypoint-code-builder::partial$component-scheduler.adoc[tag="component-long-description"]

For example, to configure the *On Table Row* source:

. Add the *On Table Row* component to the canvas.
. Click the *On Table Row* component on the canvas. 
. In the *General* tab, configure the following attributes:
+
[%header%autowidth.spread]
|===
| UI Field | Description 
| Table | Name of the database table to select from.
| Watermark column | (Optional) Values taken from this column are used to filter the contents of the next poll, so that only rows with a greater watermark value are processed.
|Id column |Used in conjunction with *Watermark column*, which is the name of the column to consider as the row ID. If provided, this component ensures that the same row is not processed twice by concurrent polls.
|Scheduling strategy | Triggers execution of the flow based on a time-based condition. This attribute is not currently enabled in the configuration UI. Configure it in the XML editor. See xref:anypoint-code-builder::acb-component-scheduler.adoc[]
|===

. Select the *Advanced* tab to configure the following attributes:
+
[%header%autowidth.spread]
|===
| UI Field | Description 
|Transactional action | Type of joining action that operations can use in transactions:
+
* NONE (Default)
* ALWAYS_BEGIN
| Transaction type | The type of transaction to create (XA or Local). Availability depends on the Mule runtime version. *Local* is the default.
| Primary node only |Select this option to execute the *On Table Row* trigger only on the primary node when running in a cluster.
| Redelivery policy | This attribute is not currently enabled in the configuration UI. Configure it in the XML editor. See xref:database-documentation.adoc#RedeliveryPolicy[Redelivery Policy].
| Query timeout | Indicates the minimum amount of time before the JDBC driver attempts to cancel a running statement. By default, no timeout (`0`) is used. 
| Query timeout unit | Select the unit of time to use. The default is SECONDS. 
| Fetch size | Indicates how many rows to fetch from the database when rows are read from a `ResultSet`. This property is required when streaming is set to `true`, in which case a default value of `10` is used.
|Max rows | Sets the limit for the maximum number of rows that any `ResultSet` object generated by the message processor can contain for the given number. If the limit is exceeded, the excess rows are silently dropped.
|Reconnection strategy | This attribute is not currently enabled in the configuration UI. Configure it in the XML editor. See xref:database-documentation.adoc#reconnect[Reconnect] and xref:database-documentation.adoc#reconnect[Reconnect Forever]. 
|===


== Add Components to Your Project

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-add-components-to-project"]

== Configure the Component Attributes

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-configure-attributes"]

=== Configure Attributes for the Bulk Delete Operation

This operation allows delete operations to execute at various times using different parameter bindings and a single database statement. 

. Add the *Bulk delete* operation to the canvas.
. Click the *Bulk delete* component on the canvas. 
. In the *General* tab, configure the following attributes:
+
[%header%autowidth.spread]
|===
| UI Field | Description
| Input Parameters | Specifies a list of maps that contain the parameter names as keys and the value the parameter is bound to. 
| SQL Query Text |Text of the SQL query to execute.
|===

. Select the *Advanced* tab to configure the following attributes:
+
[%header%autowidth.spread]
|===
| UI Field | Description 
| Transactional action | The type of joining action that operations can take for transactions:

** ALWAYS_JOIN
** JOIN_IF_POSSIBLE (Default)
** NOT_SUPPORTED
| Query timeout | Indicates the minimum amount of time before the JDBC driver attempts to cancel a running statement. By default, no timeout (`0`) is used.
| Query timeout unit | Select the unit of time to use. The default is SECONDS.
| Fetch size | Indicates how many rows to fetch from the database when rows are read from a `ResultSet`. This property is required when streaming is set to `true`, in which case a default value of `10` is used.
|Max rows | Sets the limit for the maximum number of rows that any `ResultSet` object generated by the message processor can contain for the given number. If the limit is exceeded, the excess rows are silently dropped.
Parameter types | Array of xref:database-documentation.adoc#ParameterType[ParameterType] | Use this parameter to optionally specify the type of (one or more) of the parameters in the query. If a value is provided, you're not required to reference all of the parameters. You can't reference a parameter that is not present in the input values. 
|===

=== Configure Attributes for the Bulk Insert Operation

This operation allows inserts to execute at various times using different parameter bindings and a single database statement. This improves performance compared to executing a single insert operation at various times.

. Add the *Bulk insert* operation to the canvas.
. Click the *Bulk insert* component on the canvas. 
. In the *General* tab, configure the following attributes:
+
include::connectors::db/partial$acb-config-db-general-tab.adoc[tag="general-tab-attributes"]

. Select the *Advanced* tab to configure the following attributes:


== Create a New Configuration XML File

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-create-config-file-acb"]

== See Also

include::connectors::partial$configure-acb-connectors-partial.adoc[tag="acb-template-see-also"]
* xref:database-documentation.adoc[Database Connector Reference]


