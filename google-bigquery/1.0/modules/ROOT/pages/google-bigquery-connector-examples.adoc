= Google BigQuery Connector 1.0 Examples - Mule 4

The following examples show several Mule flows for Google BigQuery Connector:

* <<get-job>>
* <<insert-job>>
* <<delete-job>>
* <<get-job-result>>
* <<cancel-job>>
* <<list-jobs>>
* <<query>>
* <<row-listener>>
* <<authorize>>
* <<html-form>>

== Prerequisites

* Java 8 or 11
* Anypoint Studio 7.5 and later
* Mule runtime engine (Mule) 4.3.0 and later
* DataWeave
* OAuth credentials for the Google API

== Configure a Connection

To secure connections, you must specify the OAuth connection field
values. To do this:

* <<create-config-file, Create a configuration file for a connection.>>
* <<configure-conn, Configure the connection global elements.>>
* <<configure-global, Configure a global element for the properties file.>>

[[create-config-file]]
=== Create a Configuration File for a Connection

Create a configuration file that includes properties for a connection:

. Create a file named `mule-app.properties` in the `/src/main/resources/` folder.
. In the `mule-app.properties` file, create a set of properties for the connection,
similar to the ones that follow, replacing the bracketed text (including the brackets)
with the correct values for your configuration:
+
----
config.consumerKey=<consumerkey>
config.consumerSecret=<consumersecret>
----
+
This may vary depending on the selected connection configuration.

For more information about creating a properties file, refer
to xref:mule-runtime::mule-app-properties-to-configure.adoc[Configuring Property Placeholders].

[[configure-conn]]
=== Configure the Connection Global Elements

Configure global elements for connection:

. Create a new Mule project.
. In the *Mule Palette* view, click *Search in Exchange* and enter `google bigquery`.
. Add *Google BigQuery Connector* to the *Selected modules* section and click *Finish*.
. Click the *Global Elements* tab and click *Create*.
. Select *Connector Configuration > Google BigQuery Config* and click *OK*.
. Enter the values to configure either JWT or OAuth2.
. Click the *Test Connection* button to ensure there is connectivity with the Google API. A successful message should pop up.
. Click *OK*.
. Open the HTTPS Listener config in *Global Element Configuration*.
. Click the *TLS* tab and select TLS Configuration > Edit inline.
. Specify the *Key Store Configuration* with the generated keystore details to enable HTTPS on this configuration.
. Click *OK*.

[[configure-global]]
=== Configure a Global Element for the Properties File

Configure a global element for the `mule-app.properties` file so that Mule knows
where to find it:

. Click the *Global Elements* tab and click *Create*.
. In the *Choose Global Type* dialog, select *Configuration properties* and click *OK*.
. In the *File* field, enter `mule.app.properties`.
. Click *OK*.



[[get-job]]
== Get a Job

This Mule flow retrieves a job from the given job ID.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Get Job* +
Gets a job
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Job Id| `attributes.queryParams.jobId`
|===

* *Logger* +
Shows the HTTP response from the *Get Job* operation

image::get-job.png[Studio Flow for the Get Job operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="getJobFlow"
		  doc:id="091ad163-0a7f-436d-b275-dffec04b14d8">
		<http:listener doc:name="Listener"
					   doc:id="4e1c31fa-0b44-4331-ae23-c8f303a6f61d"
					   config-ref="HTTP_Listener_config" path="/get" />
		<bigquery:get-job doc:name="Get Job"
						  doc:id="78d91ab2-86a5-4f86-9cd9-7b1002fa0580"
						  projectId="#[attributes.queryParams.projectId]"
						  jobId="#[attributes.queryParams.jobId]"
						  config-ref="BigQuery__Configuration" />
		<logger level="INFO" doc:name="Logger"
				doc:id="9836ec39-ea1c-489f-a4e9-79e4aeeb9555" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[insert-job]]
== Insert a Job

This Mule flow inserts a job using the input configuration.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Insert Job* +
Insert a job
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Job values content| `payload`
|===

* *Logger* +
Shows the HTTP response from the *Insert Job* operation

image::insert-job.png[Studio Flow for the Insert Job operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="insertJobFlow"
		  doc:id="37f6ca21-666b-4c42-8343-95e5609e4116">
		<http:listener doc:name="Listener"
					   doc:id="a3f30b77-e870-41dc-8e3a-200bf433d27b"
					   config-ref="HTTP_Listener_config" path="/insert" />
		<bigquery:insert-job doc:name="Insert Job"
							 doc:id="0f5aa0cf-4f6b-4d8f-8dd9-9209a3958139"
							 config-ref="BigQuery__Configuration"
							 projectId="#[attributes.queryParams.projectId]">
			<bigquery:job-values-content><![CDATA[#[payload]]]></bigquery:job-values-content>
		</bigquery:insert-job>
		<logger level="INFO" doc:name="Logger"
				doc:id="e1b41102-7615-48fc-94ce-c1dd6bfd8582" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[delete-job]]
== Delete a Job

This Mule flow deletes a job from the given job ID.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Delete Job* +
Deletes a job
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Job Id| `attributes.queryParams.jobId`
|===

* *Logger* +
Shows the HTTP response from the *Delete Job* operation

image::delete-job.png[Studio Flow for the Delete Job operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="deleteJobFlow"
		  doc:id="7b2a0960-4207-42e0-ad9d-05ee995f3788">
		<http:listener doc:name="Listener"
					   doc:id="baa3ab37-8fd3-4d3f-a310-7cf68903816c"
					   config-ref="HTTP_Listener_config" path="/delete" />
		<bigquery:delete-job doc:name="Delete Job"
							 doc:id="460fec08-c737-441c-99e3-1677bfb061a1"
							 config-ref="BigQuery__Configuration"
							 projectId="#[attributes.queryParams.projectId]"
							 jobId="#[attributes.queryParams.jobId]" />
		<logger level="INFO" doc:name="Logger"
				doc:id="b7262f84-9736-45d4-9974-ff0f09982f63" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[get-job-result]]
== Get a Job Result

This Mule flow retrieves job results from the given job ID.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Get Query Results* +
Get results of a query
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Job Id| `attributes.queryParams.jobId`
|Start Index| `0`
|Max Results| `25`
|===

* *Logger* +
Shows the HTTP response from the *Get Query Results* operation

image::get-job-result.png[Studio Flow for the Get Query Results operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="getJobResultFlow"
		  doc:id="3dbfe13b-98ec-49bc-b8b7-1844bdd60b04">
		<http:listener doc:name="Listener"
					   doc:id="89d38220-d3bc-4d1f-b326-9a6323f45f70"
					   config-ref="HTTP_Listener_config" path="/get/results" />
			<bigquery:get-query-results doc:name="Get Job Result Paged" doc:id="c9a68742-437b-4dd7-85e7-9240a7d13eb4" config-ref="BigQuery__Configuration" projectId="#[attributes.queryParams.projectId]" maxResults="25" jobId="#[attributes.queryParams.jobId]">
				<ee:repeatable-file-store-iterable inMemoryObjects="1000" />
			</bigquery:get-query-results>
		<logger level="INFO" doc:name="Logger"
				doc:id="cc2b1735-b9bf-43b7-8b92-c36fc7ca5b56" message="#[payload]" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[cancel-job]]
== Cancel a Job

This Mule flow cancels a job from the given job ID.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Cancel Job* +
Cancels a job
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Job Id| `attributes.queryParams.jobId`
|Content Type| `application/json`
|===

* *Logger* +
Shows the HTTP response from the *Cancel Job* operation

image::cancel-job.png[Studio Flow for the Cancel Job operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="cancelJobFlow"
		  doc:id="7ad79541-2fbc-4a77-b467-f7fccfa802c0">
		<http:listener doc:name="Listener"
					   doc:id="b68efca5-3bf4-4c44-ab69-3ca95bc9d870"
					   config-ref="HTTP_Listener_config" path="/cancel" />
		<bigquery:cancel-job doc:name="Cancel Job"
							 doc:id="552f1c92-5f0b-4660-b40d-caedd52d25a9"
							 config-ref="BigQuery__Configuration"
							 jobId="#[attributes.queryParams.jobId]"
							 projectId="#[attributes.queryParams.projectId]" />
		<logger level="INFO" doc:name="Logger"
				doc:id="57279d37-f831-470e-8c4d-361a5e3ea670" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[list-jobs]]
== List Jobs

This Mule flow retrieves jobs from the project.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *List Jobs* +
Lists jobs
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Content Type| `application/json`
|Max Results| `30`
|Pretty Print| `False (Default)`
|===

* *Logger* +
Shows the HTTP response from the *List Jobs* operation

image::list-jobs.png[Studio Flow for the List Jobs operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="listJobsFlow"
		  doc:id="ad23df0e-033f-4281-9ad8-54015530055e">
		<http:listener doc:name="Listener"
					   doc:id="5ec2bd33-8bba-4ebc-86d3-93c3f84d98fc"
					   config-ref="HTTP_Listener_config" path="/list" />
		<bigquery:list-jobs doc:name="List Jobs"
							doc:id="1b5bfc93-246c-40bf-b209-95f04d73ec69"
							config-ref="BigQuery__Configuration"
							projectId="#[attributes.queryParams.projectId]" />
		<logger level="INFO" doc:name="Logger"
				doc:id="d2112b37-7a33-4062-9a17-3216da2b354f" />
	</flow></mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[query]]
== Query

This Mule flow executes the query given in the query job values.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Query* +
Executes a query
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Project Id | `attributes.queryParams.projectId`
|Query values content|
[source,java,linenums]
----
%dw 2.0
output application/json
---

payload
----
|===

* *Logger* +
Shows the HTTP response from the *Query* operation

image::query.png[Studio Flow for the Query operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="queryFlow"
		  doc:id="81572138-1758-4f6b-9a92-7ddd3d1eda73">
		<http:listener doc:name="Listener"
					   doc:id="1595ba48-5020-4119-b5cd-ce7da31913c3"
					   config-ref="HTTP_Listener_config" path="/query" />
		<bigquery:query doc:name="Query"
						doc:id="e2be1ba5-47f3-4856-9c10-cd2bebb24534"
						config-ref="BigQuery__Configuration"
						projectId="#[attributes.queryParams.projectId]">
			<bigquery:query-values-content><![CDATA[#[%dw 2.0
output application/json
---

payload]]]></bigquery:query-values-content>
		</bigquery:query>
		<logger level="INFO" doc:name="Logger"
				doc:id="b86ecef3-58cf-4b3e-810e-b0e8325374e7" message="#[payload]" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[row-listener]]
== Use Row Listener

This Mule flow uses the *Row Listener* source.

This example uses the following operations:

* *Row Listener* +
Returns all rows of a table based on a watermark
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Scheduling Strategy | `Fixed Frequency`
|Frequency| `1000`
|Start delay| `0`
|Time unit| `MILLISECONDS (Default)`
|Dataset name| `test124`
|Table name| `table_data`
|Watermark column| `id`
|Since| `1`
|Column id| `id`
|===
* *Logger* +
Shows the HTTP response from the *Row Listener* source
* *Transform Message* +
Outputs the results of the *Row Listener* source in JSON format
+
----
%dw 2.0
output application/json
---
payload
----

image::row-listener.png[Studio Flow for the Row Listener source]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="rowListener"
		  doc:id="21a78f22-9ec6-44b8-aa8c-7866eec31697" initialState="stopped">
		<bigquery:on-table-row doc:name="On Table Row"
							   doc:id="82089cfc-7cca-47fc-b9f2-71b8c05d2820"
							   config-ref="BigQuery__Configuration" datasetName="test124"
							   tableName="table_data" watermarkColumn="id" since="'1'"
							   columnId="id">
			<scheduling-strategy>
				<fixed-frequency />
			</scheduling-strategy>
		</bigquery:on-table-row>
		<logger level="INFO" doc:name="Logger"
				doc:id="7a384879-01ad-4e6a-9bc3-fe3ef863a741" message="#[payload]" />
		<ee:transform doc:name="Transform Message"
					  doc:id="56356869-422d-418e-8187-bbe88f01abf6">
			<ee:message>
				<ee:set-payload><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[authorize]]
== Authorize

This Mule flow authorizes the connection.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Request* +
Consumes an HTTP service
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Method | `GET (Default)`
|Path| `/authorize?resourceOwnerId=demo`
|Body| `payload`
|===

* *Logger* +
Shows the HTTP response from the *Request* operation

image::authorize.png[Studio Flow for the Request operation]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="authorize"
		  doc:id="06af2386-4b2f-46ed-bd3f-9bfb3c9590ee">
		<http:listener doc:name="/authorize"
					   doc:id="104f7439-83c0-4fce-a790-7ee4a7390e94"
					   config-ref="HTTP_Listener_config" path="/authorize">
			<http:response>
				<http:headers><![CDATA[#[{'content-type' : 'text/html'}]]]></http:headers>
			</http:response>
		</http:listener>
		<http:request method="GET" doc:name="Request"
					  doc:id="1c3f3dfe-485b-437c-95d4-8a5ddb7b9916"
					  config-ref="HTTP_Request_configuration"
					  path="/authorize?resourceOwnerId=demo">
		</http:request>
		<logger level="INFO" doc:name="Logger"
				doc:id="7d8b630b-df5b-4ffd-96f7-c9214dac7903" message="#[payload]" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

[[html-form]]
== Render an HTML Form

This Mule flow renders the HTML form.

This example uses the following operations:

* *HTTP Listener* +
Accepts data from HTTP requests
* *Parse Template* +
Processes a template
+
Enter the following values:
+
[%header,cols="30s,70a"]
|===
|Field |Value
|Location | `index.html`
|===

image::html-form.png[Studio Flow for the Parse Template component]

=== XML for This Example

Paste this code into the Studio XML editor to quickly load the flow for this example into your Mule app:

[source,xml,linenums]
----
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	  xmlns:os="http://www.mulesoft.org/schema/mule/os"
	  xmlns:http="http://www.mulesoft.org/schema/mule/http"
	  xmlns:bigquery="http://www.mulesoft.org/schema/mule/bigquery"
	  xmlns="http://www.mulesoft.org/schema/mule/core"
	  xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	  xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/bigquery http://www.mulesoft.org/schema/mule/bigquery/current/mule-bigquery.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/os http://www.mulesoft.org/schema/mule/os/current/mule-os.xsd
		http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd">
	<secure-properties:config name="Secure_Properties_Config_demo" doc:name="Secure Properties Config" doc:id="b41b5c67-5875-437e-a182-44721a1caabe" file="mule-artifact.properties" key="mulesoft" >
		<secure-properties:encrypt algorithm="Blowfish" />
	</secure-properties:config>

	<configuration-properties
			file="mule-artifact.properties" />
	<http:request-config
			name="HTTP_Request_configuration"
			doc:name="HTTP Request configuration"
			doc:id="7eaf76d9-cd66-4f14-9d64-fc7fc4c77799">
		<http:request-connection host="127.0.0.1"
								 port="8087"/>
	</http:request-config>
	<http:listener-config name="HTTP_Listener_config"
						  doc:name="HTTP Listener config"
						  doc:id="384cd292-62b4-49bf-b738-8ca20e7a7d42">
		<http:listener-connection host="0.0.0.0"
								  port="8082" />
	</http:listener-config>
	<http:listener-config
			name="HTTP_Listener_config1_Test" doc:name="HTTP Listener config">
		<http:listener-connection host="127.0.0.1"
								  port="8087" usePersistentConnections="false"
								  connectionIdleTimeout="4000" />
	</http:listener-config>
	<bigquery:config name="BigQuery__Configuration"
					 doc:name="BigQuery  Configuration"
					 doc:id="21946c1d-6e60-438d-8d35-148c79768c70">
		<bigquery:oauth2-connection>
			<bigquery:oauth-authorization-code
					consumerKey="${secure::config.consumerKey}"
					consumerSecret="${secure::config.consumerSecret}"
					resourceOwnerId="demo" />
			<bigquery:oauth-callback-config
					listenerConfig="HTTP_Listener_config1_Test" callbackPath="/callback"
					authorizePath="/authorize" />
		</bigquery:oauth2-connection>
	</bigquery:config>
	<flow name="html-form-flow"
		  doc:id="26f2b2e8-e282-4ec4-9158-1f84fd1f1728">
		<http:listener doc:name="/"
					   doc:id="447913c3-231f-4949-8c1b-1f31598a8cfc"
					   config-ref="HTTP_Listener_config" path="/">
			<http:response>
				<http:headers><![CDATA[#[{'content-type' : 'text/html'}]]]></http:headers>
			</http:response>
		</http:listener>
		<parse-template doc:name="Parse Template"
						doc:id="b6900db6-31e1-4381-b0ae-e352b7fbb7f0" location="index.html" />
	</flow>
</mule>
----

=== Steps for Running This Example

. Verify that your connector is configured.
. Save the project.
. Click the *Authorize* button for OAuth2 authorization.
. From a web browser, test the application by entering `+http://{app-name}.cloudhub.io+`.

== See Also

* xref:connectors::introduction/introduction-to-anypoint-connectors.adoc[Introduction to Anypoint Connectors]
* https://help.mulesoft.com[MuleSoft Help Center]
