= Troubleshoot SFTP Connector
To troubleshoot Anypoint Connector for SFTP (SFTP Connector), review the following sections for help performing general troubleshooting, addressing specific common errors, and interpreting commonly thrown messages.

== Troubleshoot Connectivity, Permissions and Server Side Issues

Sometimes when attempting to connect to an SFTP server you can run into issues when establishing the connection because a SFTP requires an encrypted communication channel and this, in turn, requires a certain amount of configuration.
For example, you might need to enable specific encryption cyphers or key exchange algorithms, or you could indicate the location of certain authorization keys.

To resolve this error:

1. To manage this, SFTP servers usually have a configuration file which you should locate and check. For example, if you are using OpenSSH you can do this by accessing the sshd_config file.
It is important to review this file because it contains parameters and settings regarding the connection, encryption methods, timeouts and so forth.
Check the configuration file to verify correct configuration and customize your environment to suit your needs.

2. Use the configuration file to increase the logging level on the server side.

== Troubleshoot Mule Application Issues

Sometimes we are not sure why our application is failing and we require a better understanding of what is going on in the interaction with the SFTP Server.

To resolve this error:

1. Use the configuration file to increase the logging level on the server side.

2. Try to replicate the issue using an SFTP client (e.g., Cyberduck or Filezilla). If the issue also happens with one of these clients,
   then it is likely that the issue is not related to the mule application.

3. Get better and more detailed logs on the Mule Application side by enabling verbose logging for sftp connector and for jsch driver:

    Go to the log configuration file in your application and add these lines:

    <AsyncLogger name=“org.mule.extension.sftp” level=“TRACE”/>
    <AsyncLogger name=“com.jcraft.jsch” level=“DEBUG”/>

    Add the following argument to your run configuration: -M-Djavax.net.debug=ssl,handshake

5. Try to minimize or remove unnecessary data transformations (you could even use hard coded data) to minimize complexity and determine whether the issue is in the interaction with the SFTP server.

[[common-throws]]
== Understand Common Throws

Here is a list of common throws messages and how to interpret them.

SFTP:ILLEGAL_PATH
The specified path is invalid because, for example, it does not exist.

SFTP:FILE_ALREADY_EXISTS
An attempt has been made to create a file at the same location and with the same name of an already existing file.
This happens, for example, when attempting to write a file using the CREATE_NEW write mode to the path of an already existing file.

SFTP:ACCESS_DENIED
An operation has made an attempt to access a path at the sftp server, and perform an action for which this user has not been granted permission.

SFTP:FILE_LOCK
An operation has made an attempt to acquire a lock over a file, and it was unsuccessful.

SFTP:ILLEGAL_CONTENT
The write operation has received invalid content to be written.

SFTP:CONNECTIVITY
The connection to the sftp server has been interrupted.

SFTP:INVALID_CREDENTIALS
Authentication against SFTP server has failed due to invalid credentials.

SFTP:CONNECTION_TIMEOUT
The connection attempt to the SFTP server has timed out.

SFTP:CANNOT_REACH
An error occurred while attempting to establish the connection to the indicated host and port for the SFTP server. Typically, the connection was refused remotely (e.g., no process is listening on the remote address/port).

SFTP:UNKNOWN_HOST
Indicates that the IP address of a host could not be determined.

SFTP:DISCONNECTED
This error appears when too many failed login attempts to a server have been made. There could be multiple causes, but the most common one is invalid credentials.


== See Also
* https://help.mulesoft.com[MuleSoft Help Center]
* xref:sftp-connector-reference.adoc[Connector Reference]
